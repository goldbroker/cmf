!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=63)}([function(e,t){e.exports=jQuery},function(e,t,i){var n=i(34)("wks"),o=i(9),r=i(3).Symbol;e.exports=function(e){return n[e]||(n[e]=r&&r[e]||(r||o)("Symbol."+e))}},function(e,t,i){var n,o,r;!function(s){"use strict";o=[i(0)],void 0===(r="function"==typeof(n=function(e){return e.ui=e.ui||{},e.ui.version="1.13.3"})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var n=i(5),o=i(20);e.exports=i(10)?function(e,t,i){return n.setDesc(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t){var i=Object;e.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(e,t,i){var n=i(3),o=i(4),r=i(9)("src"),s=Function.toString,a=(""+s).split("toString");i(8).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,i,s){"function"==typeof i&&(i.hasOwnProperty(r)||o(i,r,e[t]?""+e[t]:a.join(String(t))),i.hasOwnProperty("name")||o(i,"name",t)),e===n?e[t]=i:(s||delete e[t],o(e,t,i))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||s.call(this)}))},function(e,t){e.exports={}},function(e,t){var i=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){e.exports=!i(21)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){"use strict";var n=i(37),o=i(23),r=i(6),s=i(4),a=i(14),l=i(7),c=i(39),d=i(15),u=i(5).getProto,h=i(1)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,i,g,v,m,y){c(i,t,g);var b,_,w=function(e){if(!p&&e in N)return N[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},x=t+" Iterator",C="values"==v,k=!1,N=e.prototype,S=N[h]||N["@@iterator"]||v&&N[v],E=S||w(v);if(S){var P=u(E.call(new e));d(P,x,!0),!n&&a(N,"@@iterator")&&s(P,h,f),C&&"values"!==S.name&&(k=!0,E=function(){return S.call(this)})}if(n&&!y||!p&&!k&&N[h]||s(N,h,E),l[t]=E,l[x]=f,v)if(b={values:C?E:w("values"),keys:m?E:w("keys"),entries:C?w("entries"):E},y)for(_ in b)_ in N||r(N,_,b[_]);else o(o.P+o.F*(p||k),t,b);return b}},function(e,t,i){var n=i(38);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(5).setDesc,o=i(14),r=i(1)("toStringTag");e.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,r)&&n(e,r,{configurable:!0,value:t})}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){var n,o,r;
/*!
 * jQuery UI Widget 1.13.3
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){var t=0,i=Array.prototype.hasOwnProperty,n=Array.prototype.slice;return e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)(n=e._data(o,"events"))&&n.remove&&e(o).triggerHandler("remove");t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return n||(n=i,i=e.Widget),Array.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr.pseudos[c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this||!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new i).options=e.widget.extend({},s.options),e.each(n,(function(e,t){a[e]="function"==typeof t?function(){function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=n,this._superApply=o,e=t.apply(this,arguments),this._super=i,this._superApply=r,e}}():t})),r.prototype=e.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},a,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)})),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;a<l;a++)for(o in s[a])r=s[a][o],i.call(s[a],o)&&void 0!==r&&(e.isPlainObject(r)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],r):e.widget.extend({},r):t[o]=r);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each((function(){var i,n=e.data(this,o);return"instance"===r?(l=n,!1):n?"function"!=typeof n[r]||"_"===r.charAt(0)?e.error("no such method '"+r+"' for "+t+" widget instance"):(i=n[r].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):l=void 0:(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each((function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new i(r,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function o(){var i=[];t.element.each((function(t,o){e.map(n.classesElementLookup,(function(e){return e})).some((function(e){return e.is(o)}))||i.push(o)})),n._on(e(i),{remove:"_untrackClassesElement"})}function r(r,s){var a,l;for(l=0;l<r.length;l++)a=n.classesElementLookup[r[l]]||e(),t.add?(o(),a=e(e.uniqueSort(a.get().concat(t.element.get())))):a=e(a.not(t.element).get()),n.classesElementLookup[r[l]]=a,i.push(r[l]),s&&t.classes[r[l]]&&i.push(t.classes[r[l]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))})),this._off(e(t.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,r={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,(function(n,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?o.on(c,d,a):i.on(c,a)}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!("function"==typeof s&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){var s;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})?o={duration:o}:!0===o&&(o={}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue((function(i){e(this)[t](),r&&r.call(n[0]),i()}))}})),e.widget})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n=i(19),o=i(1)("toStringTag"),r="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=(t=Object(e))[o])?i:r?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(3),o=i(8),r=i(4),s=i(6),a=i(13),l=function(e,t,i){var c,d,u,h,p=e&l.F,f=e&l.G,g=e&l.S,v=e&l.P,m=e&l.B,y=f?n:g?n[t]||(n[t]={}):(n[t]||{}).prototype,b=f?o:o[t]||(o[t]={}),_=b.prototype||(b.prototype={});for(c in f&&(i=t),i)u=((d=!p&&y&&c in y)?y:i)[c],h=m&&d?a(u,n):v&&"function"==typeof u?a(Function.call,u):u,y&&!d&&s(y,c,u),b[c]!=u&&r(b,c,h),v&&_[c]!=u&&(_[c]=u)};n.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,e.exports=l},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){var n=i(6);e.exports=function(e,t){for(var i in t)n(e,i,t[i]);return e}},function(e,t){e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError(i+": use the 'new' operator!");return e}},function(e,t,i){var n=i(13),o=i(47),r=i(48),s=i(28),a=i(49),l=i(50);e.exports=function(e,t,i,c){var d,u,h,p=l(e),f=n(i,c,t?2:1),g=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(r(p))for(d=a(e.length);d>g;g++)t?f(s(u=e[g])[0],u[1]):f(e[g]);else for(h=p.call(e);!(u=h.next()).done;)o(h,f,u.value,t)}},function(e,t,i){var n=i(16);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){var n,o,r;
/*!
 * jquery.fancytree.js
 * Tree view control with support for lazy loading and much more.
 * https://github.com/mar10/fancytree/
 *
 * Copyright (c) 2008-2023, Martin Wendt (https://wwWendt.de)
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.38.3
 * @date 2023-02-01T20:52:50Z
 */o=[i(0),i(54)],void 0===(r="function"==typeof(n=function(e){"use strict";if(!e.ui||!e.ui.fancytree){var t,i,n=null,o=new RegExp(/\.|\//),r=/[&<>"'/]/g,s=/[<>"'/]/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},l={16:!0,17:!0,18:!0},c={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d={16:"shift",17:"ctrl",18:"alt",91:"meta",93:"meta"},u={0:"",1:"left",2:"middle",3:"right"},h="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),p={},f="columns types".split(" "),g="checkbox expanded extraClasses folder icon iconTooltip key lazy partsel radiogroup refKey selected statusNodeType title tooltip type unselectable unselectableIgnore unselectableStatus".split(" "),v={},m={},y={active:!0,children:!0,data:!0,focus:!0};for(t=0;t<h.length;t++)p[h[t]]=!0;for(t=0;t<g.length;t++)i=g[t],v[i]=!0,i!==i.toLowerCase()&&(m[i.toLowerCase()]=i);var b=Array.isArray;return _(e.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),Date.now||(Date.now=function(){return(new Date).getTime()}),L.prototype={_findDirectChild:function(e){var t,i,n=this.children;if(n)if("string"==typeof e){for(t=0,i=n.length;t<i;t++)if(n[t].key===e)return n[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){_(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var t=0,i=e.length;t<i;t++)this.children.push(new L(this,e[t]));this.tree._callHook("treeStructureChanged",this.tree,"setChildren")},addChildren:function(t,i){var n,o,r,s,a=this.getFirstChild(),l=this.getLastChild(),c=[];for(e.isPlainObject(t)&&(t=[t]),this.children||(this.children=[]),n=0,o=t.length;n<o;n++)c.push(new L(this,t[n]));if(s=c[0],null==i?this.children=this.children.concat(c):(i=this._findDirectChild(i),_((r=e.inArray(i,this.children))>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[r,0].concat(c))),a&&!i){for(n=0,o=c.length;n<o;n++)c[n].render();a!==this.getFirstChild()&&a.renderStatus(),l!==this.getLastChild()&&l.renderStatus()}else(!this.parent||this.parent.ul||this.tr)&&this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===c.length?c[0]:null),s},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,t){switch(void 0!==t&&"over"!==t||(t="child"),t){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var i=this.children?this.children[0]:null;return this.addChildren(e,i);case"child":case"over":return this.addChildren(e)}_(!1,"Invalid mode: "+t)},addPagingNode:function(t,i){var n,o;if(i=i||"child",!1!==t)return t=e.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,i);for(n=this.children.length-1;n>=0;n--)"paging"===(o=this.children[n]).statusNodeType&&this.removeChild(o);this.partload=!1},appendSibling:function(e){return this.addNode(e,"after")},applyCommand:function(e,t){return this.tree.applyCommand(e,this,t)},applyPatch:function(e){if(null===e)return this.remove(),P(this);var t,i,n={children:!0,expanded:!0,parent:!0};for(t in e)w(e,t)&&(i=e[t],n[t]||x(i)||(v[t]?this[t]=i:this.data[t]=i));return w(e,"children")&&(this.removeChildren(),e.children&&this._setChildren(e.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),w(e,"expanded")?this.setExpanded(e.expanded):P(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,i){return e.addNode(this.toDict(!0,i),t)},countChildren:function(e){var t,i,n,o=this.children;if(!o)return 0;if(n=o.length,!1!==e)for(t=0,i=n;t<i;t++)n+=o[t].countChildren();return n},debug:function(e){this.tree.options.debugLevel>=4&&(Array.prototype.unshift.call(arguments,this.toString()),k("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){var t=e?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(t,this)},error:function(e){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),k("error",arguments))},findAll:function(e){e=x(e)?e:H(e);var t=[];return this.visit((function(i){e(i)&&t.push(i)})),t},findFirst:function(e){e=x(e)?e:H(e);var t=null;return this.visit((function(i){if(e(i))return t=i,!1})),t},findRelatedNode:function(e,t){return this.tree.findRelatedNode(this,e,t)},_changeSelectStatusAttrs:function(e){var t=!1,i=this.tree.options,o=n.evalOption("unselectable",this,this,i,!1),r=n.evalOption("unselectableStatus",this,this,i,void 0);switch(o&&null!=r&&(e=r),e){case!1:t=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:t=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case void 0:t=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:_(!1,"invalid state: "+e)}return t&&this.renderStatus(),t},fixSelection3AfterClick:function(e){var t=this.isSelected();this.visit((function(e){if(e._changeSelectStatusAttrs(t),e.radiogroup)return"skip"})),this.fixSelection3FromEndNodes(e)},fixSelection3FromEndNodes:function(e){var t=this.tree.options;_(3===t.selectMode,"expected selectMode 3"),function e(i){var o,r,s,a,l,c,d,u,h=i.children;if(h&&h.length){for(c=!0,d=!1,o=0,r=h.length;o<r;o++)a=e(s=h[o]),n.evalOption("unselectableIgnore",s,s,t,!1)||(!1!==a&&(d=!0),!0!==a&&(c=!1));l=!!c||!!d&&void 0}else l=null==(u=n.evalOption("unselectableStatus",i,i,t,void 0))?!!i.selected:!!u;return i.partsel&&!i.selected&&i.lazy&&null==i.children&&(l=void 0),i._changeSelectStatusAttrs(l),l}(this),this.visitParents((function(e){var i,o,r,s,a,l=e.children,c=!0,d=!1;for(i=0,o=l.length;i<o;i++)r=l[i],n.evalOption("unselectableIgnore",r,r,t,!1)||(((s=null==(a=n.evalOption("unselectableStatus",r,r,t,void 0))?!!r.selected:!!a)||r.partsel)&&(d=!0),s||(c=!1));s=!!c||!!d&&void 0,e._changeSelectStatusAttrs(s)}))},fromDict:function(t){for(var i in t)v[i]?this[i]=t[i]:"data"===i?e.extend(this.data,t.data):x(t[i])||y[i]||(this.data[i]=t[i]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){if(void 0!==this.hasChildren())return this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t,i){t=t||".";var n,o=[];return e.each(this.getParentList(!1,!0),(function(e,t){n=""+(t.getIndex()+1),i&&(n=("0000000"+n).substr(-i)),o.push(n)})),o.join(t)},getKeyPath:function(e){var t=this.tree.options.keyPathSeparator;return t+this.getPath(!e,"key",t)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var e,t,i=this.parent.children;for(e=0,t=i.length-1;e<t;e++)if(i[e]===this)return i[e+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var i=[],n=t?this:this.parent;n;)(e||n.parent)&&i.unshift(n),n=n.parent;return i},getPath:function(e,t,i){e=!1!==e,i=i||"/";var n,o=[],r=x(t=t||"title");return this.visitParents((function(e){e.parent&&(n=r?t(e):e[t],o.unshift(n))}),e),o.join(i)},getPrevSibling:function(){if(this.parent){var e,t,i=this.parent.children;for(e=1,t=i.length;e<t;e++)if(i[e]===this)return i[e-1]}return null},getSelectedNodes:function(e){var t=[];return this.visit((function(i){if(i.selected&&(t.push(i),!0===e))return"skip"})),t},hasChildren:function(){if(this.lazy){if(null==this.children)return;if(0===this.children.length)return!1;if(1===this.children.length&&this.children[0].isStatusNode())return;return!0}return!(!this.children||!this.children.length)},hasClass:function(e){return(" "+(this.extraClasses||"")+" ").indexOf(" "+e+" ")>=0},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){this.tree.options.debugLevel>=3&&(Array.prototype.unshift.call(arguments,this.toString()),k("info",arguments))},isActive:function(){return this.tree.activeNode===this},isBelowOf:function(e){return this.getIndexHier(".",5)>e.getIndexHier(".",5)},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(t){if(!t||t.tree!==this.tree)return!1;for(var i=this.parent;i;){if(i===t)return!0;i===i.parent&&e.error("Recursive parent link: "+i),i=i.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||void 0!==this.hasChildren()},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return void 0===this.hasChildren()},isVisible:function(){var e,t,i=this.tree.enableFilter,n=this.getParentList(!1,!1);if(i&&!this.match&&!this.subMatchCount)return!1;for(e=0,t=n.length;e<t;e++)if(!n[e].expanded)return!1;return!0},lazyLoad:function(t){e.error("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead.")},load:function(e){var t,i,n=this,o=this.isExpanded();return _(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),!1===(i=this.tree._triggerNodeEvent("lazyLoad",this))?P(this):(_("boolean"!=typeof i,"lazyLoad event must return source in data.result"),t=this.tree._callHook("nodeLoadChildren",this,i),o?(this.expanded=!0,t.always((function(){n.render()}))):t.always((function(){n.renderStatus()})),t)):P(this)},makeVisible:function(t){var i,n=this,o=[],r=new e.Deferred,s=this.getParentList(!1,!1),a=s.length,l=!(t&&!0===t.noAnimation),c=!(t&&!1===t.scrollIntoView);for(i=a-1;i>=0;i--)o.push(s[i].setExpanded(!0,t));return e.when.apply(e,o).done((function(){c?n.scrollIntoView(l).done((function(){r.resolve()})):r.resolve()})),r.promise()},moveTo:function(t,i,n){void 0===i||"over"===i?i="child":"firstChild"===i&&(t.children&&t.children.length?(i="before",t=t.children[0]):i="child");var o,r=this.tree,s=this.parent,a="child"===i?t:t.parent;if(this!==t){if(this.parent?a.isDescendantOf(this)&&e.error("Cannot move a node to its own descendant"):e.error("Cannot move system root"),a!==s&&s.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===a)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else _((o=e.inArray(this,this.parent.children))>=0,"invalid source parent"),this.parent.children.splice(o,1);if(this.parent=a,a.hasChildren())switch(i){case"child":a.children.push(this);break;case"before":_((o=e.inArray(t,a.children))>=0,"invalid target parent"),a.children.splice(o,0,this);break;case"after":_((o=e.inArray(t,a.children))>=0,"invalid target parent"),a.children.splice(o+1,0,this);break;default:e.error("Invalid mode "+i)}else a.children=[this];n&&t.visit(n,!0),a===s?a.triggerModifyChild("move",this):a.triggerModifyChild("add",this),r!==t.tree&&(this.warn("Cross-tree moveTo is experimental!"),this.visit((function(e){e.tree=t.tree}),!0)),r._callHook("treeStructureChanged",r,"moveTo"),s.isDescendantOf(a)||s.render(),a.isDescendantOf(s)||a===s||a.render()}},navigate:function(t,i){var n,o=e.ui.keyCode;switch(t){case"left":case o.LEFT:if(this.expanded)return this.setExpanded(!1);break;case"right":case o.RIGHT:if(!this.expanded&&(this.children||this.lazy))return this.setExpanded()}if(n=this.findRelatedNode(t)){try{n.makeVisible({scrollIntoView:!1})}catch(e){}return!1===i?(n.setFocus(),P()):n.setActive()}return this.warn("Could not find related node '"+t+"'."),P()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(i){var n,o=this.parent,r=e.inArray(this,o.children),s=this;return _(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(n=this.tree._callHook("nodeLoadChildren",this,i)).done((function(e){var i=s.children;for(t=0;t<i.length;t++)i[t].parent=o;o.children.splice.apply(o.children,[r+1,0].concat(i)),s.children=null,s.remove(),o.render()})).fail((function(){s.setExpanded()})),n},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,i){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.debug("clearTimeout(%o)",this.tree.timer)),this.tree.timer=null;var n=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout((function(){n.tree.debug("setTimeout: trigger expand"),n.setExpanded(!0)}),i);break;case"activate":this.tree.timer=setTimeout((function(){n.tree.debug("setTimeout: trigger activate"),n.setActive(!0)}),i);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(t,i){if(void 0!==i&&(n=i).tree&&void 0!==n.statusNodeType)throw Error("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead.");var n,o=e.extend({effects:!0===t?{duration:200,queue:!1}:t,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent,topNode:null},i),r=o.scrollParent,s=this.tree.$container,a=s.css("overflow-y");r?r.jquery||(r=e(r)):r=this.tree.tbody?s.scrollParent():"scroll"===a||"auto"===a?s:s.scrollParent(),r[0]!==document&&r[0]!==document.body||(this.debug("scrollIntoView(): normalizing scrollParent to 'window':",r[0]),r=e(window));var l,c,d,u=new e.Deferred,h=this,p=e(this.span).height(),f=o.scrollOfs.top||0,g=o.scrollOfs.bottom||0,v=r.height(),m=r.scrollTop(),y=r,b=r[0]===window,w=o.topNode||null,x=null;return this.isRootNode()||!this.isVisible()?(this.info("scrollIntoView(): node is invisible."),P()):(b?(c=e(this.span).offset().top,l=w&&w.span?e(w.span).offset().top:0,y=e("html,body")):(_(r[0]!==document&&r[0]!==document.body,"scrollParent should be a simple element or `window`, not document or body."),d=r.offset().top,c=e(this.span).offset().top-d+m,l=w?e(w.span).offset().top-d+m:0,v-=Math.max(0,r.innerHeight()-r[0].clientHeight)),c<m+f?x=c-f:c+p>m+v-g&&(x=c+p-v+g,w&&(_(w.isRootNode()||w.isVisible(),"topNode must be visible"),l<x&&(x=l-f))),null===x?u.resolveWith(this):o.effects?(o.effects.complete=function(){u.resolveWith(h)},y.stop(!0).animate({scrollTop:x},o.effects)):(y[0].scrollTop=x,u.resolveWith(this)),u.promise())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e,t){return this.tree._callHook("nodeSetSelected",this,e,t)},setStatus:function(e,t,i){return this.tree._callHook("nodeSetStatus",this,e,t,i)},setTitle:function(e){this.title=e,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var i,n,o=this.children;if(o){if(e=e||function(e,t){var i=e.title.toLowerCase(),n=t.title.toLowerCase();return i===n?0:i>n?1:-1},o.sort(e),t)for(i=0,n=o.length;i<n;i++)o[i].children&&o[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,i){var n,o,r,s,a={},l=this;if(e.each(g,(function(e,t){(l[t]||!1===l[t])&&(a[t]=l[t])})),e.isEmptyObject(this.data)||(a.data=e.extend({},this.data),e.isEmptyObject(a.data)&&delete a.data),i){if(!1===(s=i(a,l)))return!1;"skip"===s&&(t=!1)}if(t&&b(this.children))for(a.children=[],n=0,o=this.children.length;n<o;n++)(r=this.children[n]).isStatusNode()||!1!==(s=r.toDict(!0,i))&&a.children.push(s);return a},toggleClass:function(t,i){var n,o,r=t.match(/\S+/g)||[],s=0,a=!1,l=this[this.tree.statusClassPropName],c=" "+(this.extraClasses||"")+" ";for(l&&e(l).toggleClass(t,i);n=r[s++];)if(o=c.indexOf(" "+n+" ")>=0,i=void 0===i?!o:!!i)o||(c+=n+" ",a=!0);else for(;c.indexOf(" "+n+" ")>-1;)c=c.replace(" "+n+" "," ");return this.extraClasses=C(c),a},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"FancytreeNode@"+this.key+"[title='"+this.title+"']"},triggerModifyChild:function(t,i,n){var o,r=this.tree.options.modifyChild;r&&(i&&i.parent!==this&&e.error("childNode "+i+" is not a child of "+this),o={node:this,tree:this.tree,operation:t,childNode:i||null},n&&e.extend(o,n),r({type:"modifyChild"},o))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var i,n,o=!0,r=this.children;if(!0===t&&(!1===(o=e(this))||"skip"===o))return o;if(r)for(i=0,n=r.length;i<n&&!1!==(o=r[i].visit(e,!0));i++);return o},visitAndLoad:function(t,i,n){var o,r,s,a=this;return!t||!0!==i||!1!==(r=t(a))&&"skip"!==r?a.children||a.lazy?(o=new e.Deferred,s=[],a.load().done((function(){for(var i=0,n=a.children.length;i<n;i++){if(!1===(r=a.children[i].visitAndLoad(t,!0,!0))){o.reject();break}"skip"!==r&&s.push(r)}e.when.apply(this,s).then((function(){o.resolve()}))})),o.promise()):P():n?r:P()},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var i=this.parent;i;){if(!1===e(i))return!1;i=i.parent}return!0},visitSiblings:function(e,t){var i,n,o,r=this.parent.children;for(i=0,n=r.length;i<n;i++)if(o=r[i],(t||o!==this)&&!1===e(o))return!1;return!0},warn:function(e){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),k("warn",arguments))}},M.prototype={_makeHookContext:function(t,i,n){var o,r;return void 0!==t.node?(i&&t.originalEvent!==i&&e.error("invalid args"),o=t):t.tree?o={node:t,tree:r=t.tree,widget:r.widget,options:r.widget.options,originalEvent:i,typeInfo:r.types[t.type]||{}}:t.widget?o={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:i}:e.error("invalid args"),n&&e.extend(o,n),o},_callHook:function(t,i,n){var o=this._makeHookContext(i),r=this[t],s=Array.prototype.slice.call(arguments,2);return x(r)||e.error("_callHook('"+t+"') is not a function"),s.unshift(o),r.apply(this,s)},_setExpiringValue:function(e,t,i){this._tempCache[e]={value:t,expire:Date.now()+(+i||50)}},_getExpiringValue:function(e){var t=this._tempCache[e];return t&&t.expire>Date.now()?t.value:(delete this._tempCache[e],null)},_usesExtension:function(t){return e.inArray(t,this.options.extensions)>=0},_requireExtension:function(t,i,n,o){null!=n&&(n=!!n);var r=this._local.name,s=this.options.extensions,a=e.inArray(t,s)<e.inArray(r,s),l=i&&null==this.ext[t],c=!l&&null!=n&&n!==a;return _(r&&r!==t,"invalid or same name '"+r+"' (require yourself?)"),!l&&!c||(o||(l||i?(o="'"+r+"' extension requires '"+t+"'",c&&(o+=" to be registered "+(n?"before":"after")+" itself")):o="If used together, `"+t+"` must be registered "+(n?"before":"after")+" `"+r+"`"),e.error(o),!1)},activateKey:function(e,t){var i=this.getNodeByKey(e);return i?i.setActive(!0,t):this.activeNode&&this.activeNode.setActive(!1,t),i},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyCommand:function(t,i,n){var o;switch(i=i||this.getActiveNode(),t){case"moveUp":(o=i.getPrevSibling())&&(i.moveTo(o,"before"),i.setActive());break;case"moveDown":(o=i.getNextSibling())&&(i.moveTo(o,"after"),i.setActive());break;case"indent":(o=i.getPrevSibling())&&(i.moveTo(o,"child"),o.setExpanded(),i.setActive());break;case"outdent":i.isTopLevel()||(i.moveTo(i.getParent(),"after"),i.setActive());break;case"remove":o=i.getPrevSibling()||i.getParent(),i.remove(),o&&o.setActive();break;case"addChild":i.editCreateNode("child","");break;case"addSibling":i.editCreateNode("after","");break;case"rename":i.editStart();break;case"down":case"first":case"last":case"left":case"parent":case"right":case"up":return i.navigate(t);default:e.error("Unhandled command: '"+t+"'")}},applyPatch:function(t){var i,n,o,r,s,a,l=t.length,c=[];for(n=0;n<l;n++)_(2===(o=t[n]).length,"patchList must be an array of length-2-arrays"),r=o[0],s=o[1],(a=null===r?this.rootNode:this.getNodeByKey(r))?(i=new e.Deferred,c.push(i),a.applyPatch(s).always(O(i,a))):this.warn("could not find node with key '"+r+"'");return e.when.apply(e,c).promise()},clear:function(e){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){this.options.debugLevel>=4&&(Array.prototype.unshift.call(arguments,this.toString()),k("log",arguments))},destroy:function(){this.widget.destroy()},enable:function(e){!1===e?this.widget.disable():this.widget.enable()},enableUpdate:function(e){return e=!1!==e,!!this._enableUpdate==!!e?e:(this._enableUpdate=e,e?(this.debug("enableUpdate(true): redraw "),this._callHook("treeStructureChanged",this,"enableUpdate"),this.render()):this.debug("enableUpdate(false)..."),!e)},error:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),k("error",arguments))},expandAll:function(e,t){var i=this.enableUpdate(!1);e=!1!==e,this.visit((function(i){!1!==i.hasChildren()&&i.isExpanded()!==e&&i.setExpanded(e,t)})),this.enableUpdate(i)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(e,t){var i,n=null,o=this.getFirstChild();function r(i){if(e(i)&&(n=i),n||i===t)return!1}return e="string"==typeof e?(i=new RegExp("^"+e,"i"),function(e){return i.test(e.title)}):e,t=t||o,this.visitRows(r,{start:t,includeSelf:!1}),n||t===o||this.visitRows(r,{start:o,includeSelf:!0}),n},findRelatedNode:function(t,i,n){var o=null,r=e.ui.keyCode;switch(i){case"parent":case r.BACKSPACE:t.parent&&t.parent.parent&&(o=t.parent);break;case"first":case r.HOME:this.visit((function(e){if(e.isVisible())return o=e,!1}));break;case"last":case r.END:this.visit((function(e){e.isVisible()&&(o=e)}));break;case"left":case r.LEFT:t.expanded?t.setExpanded(!1):t.parent&&t.parent.parent&&(o=t.parent);break;case"right":case r.RIGHT:t.expanded||!t.children&&!t.lazy?t.children&&t.children.length&&(o=t.children[0]):(t.setExpanded(),o=t);break;case"up":case r.UP:this.visitRows((function(e){return o=e,!1}),{start:t,reverse:!0,includeSelf:!1});break;case"down":case r.DOWN:this.visitRows((function(e){return o=e,!1}),{start:t,includeSelf:!1});break;default:this.tree.warn("Unknown relation '"+i+"'.")}return o},generateFormElements:function(t,i,n){n=n||{};var o,r="string"==typeof t?t:"ft_"+this._id+"[]",s="string"==typeof i?i:"ft_"+this._id+"_active",a="fancytree_result_"+this._id,l=e("#"+a),c=3===this.options.selectMode&&!1!==n.stopOnParents;function d(t){l.append(e("<input>",{type:"checkbox",name:r,value:t.key,checked:!0}))}l.length?l.empty():l=e("<div>",{id:a}).hide().insertAfter(this.$container),!1!==i&&this.activeNode&&l.append(e("<input>",{type:"radio",name:s,value:this.activeNode.key,checked:!0})),n.filter?this.visit((function(e){var t=n.filter(e);if("skip"===t)return t;!1!==t&&d(e)})):!1!==t&&(o=this.getSelectedNodes(c),e.each(o,(function(e,t){d(t)})))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getOption:function(e){return this.widget.option(e)},getNodeByKey:function(e,t){var i,n;return!t&&(i=document.getElementById(this.options.idPrefix+e))?i.ftnode?i.ftnode:null:(t=t||this.rootNode,n=null,e=""+e,t.visit((function(t){if(t.key===e)return n=t,!1}),!0),n)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){this.options.debugLevel>=3&&(Array.prototype.unshift.call(arguments,this.toString()),k("info",arguments))},isLoading:function(){var e=!1;return this.rootNode.visit((function(t){if(t._isLoading||t._requestId)return e=!0,!1}),!0),e},loadKeyPath:function(t,i){var n,o,r,s=this,a=new e.Deferred,l=this.getRootNode(),c=this.options.keyPathSeparator,d=[],u=e.extend({},i);for("function"==typeof i?n=i:i&&i.callback&&(n=i.callback),u.callback=function(e,t,i){n&&n.call(e,t,i),a.notifyWith(e,[{node:t,status:i}])},null==u.matchKey&&(u.matchKey=function(e,t){return e.key===t}),b(t)||(t=[t]),o=0;o<t.length;o++)(r=t[o]).charAt(0)===c&&(r=r.substr(1)),d.push(r.split(c));return setTimeout((function(){s._loadKeyPathImpl(a,u,l,d).done((function(){a.resolve()}))}),0),a.promise()},_loadKeyPathImpl:function(t,i,n,o){var r,s,a,l,c,d,u,h,p,f,g=this;function v(e,t){var n,o,r=e.children;if(r)for(n=0,o=r.length;n<o;n++)if(i.matchKey(r[n],t))return r[n];return null}for(u={},s=0;s<o.length;s++)for(p=o[s],h=n;p.length;){if(a=p.shift(),!(l=v(h,a))){this.warn("loadKeyPath: key not found: "+a+" (parent: "+h+")"),i.callback(this,a,"error");break}if(0===p.length){i.callback(this,l,"ok");break}if(l.lazy&&void 0===l.hasChildren()){i.callback(this,l,"loaded"),u[a=l.key]?u[a].pathSegList.push(p):u[a]={parent:l,pathSegList:[p]};break}i.callback(this,l,"loaded"),h=l}function m(e,t,n){i.callback(g,t,"loading"),t.load().done((function(){g._loadKeyPathImpl.call(g,e,i,t,n).always(O(e,g))})).fail((function(n){g.warn("loadKeyPath: error loading lazy "+t),i.callback(g,l,"error"),e.rejectWith(g)}))}for(c in r=[],u)w(u,c)&&(d=u[c],f=new e.Deferred,r.push(f),m(f,d.parent,d.pathSegList));return e.when.apply(e,r).promise()},reactivate:function(e){var t,i=this.activeNode;return i?(this.activeNode=null,t=i.setActive(!0,{noFocus:!0}),e&&i.setFocus(),t):P()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},selectAll:function(e){this.visit((function(t){t.setSelected(e)}))},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},setOption:function(e,t){return this.widget.option(e,t)},debugTime:function(e){this.options.debugLevel>=4&&window.console.time(this+" - "+e)},debugTimeEnd:function(e){this.options.debugLevel>=4&&window.console.timeEnd(this+" - "+e)},toDict:function(e,t){var i=this.rootNode.toDict(!0,t);return e?i:i.children},toString:function(){return"Fancytree@"+this._id},_triggerNodeEvent:function(e,t,i,n){var o=this._makeHookContext(t,i,n),r=this.widget._trigger(e,i,o);return!1!==r&&void 0!==o.result?o.result:r},_triggerTreeEvent:function(e,t,i){var n=this._makeHookContext(this,t,i),o=this.widget._trigger(e,t,n);return!1!==o&&void 0!==n.result?n.result:o},visit:function(e){return this.rootNode.visit(e,!1)},visitRows:function(e,t){if(!this.rootNode.hasChildren())return!1;if(t&&t.reverse)return delete t.reverse,this._visitRowsUp(e,t);var i,n,o,r,s=0,a=!1===(t=t||{}).includeSelf,l=!!t.includeHidden,c=!l&&this.enableFilter,d=t.start||this.rootNode.children[0];for(o=d.parent;o;){for(_((n=(r=o.children).indexOf(d)+s)>=0,"Could not find "+d+" in parent's children: "+o),i=n;i<r.length;i++)if(d=r[i],!c||d.match||d.subMatchCount){if(!a&&!1===e(d))return!1;if(a=!1,d.children&&d.children.length&&(l||d.expanded)&&!1===d.visit((function(t){return!c||t.match||t.subMatchCount?!1!==e(t)&&(l||!t.children||t.expanded?void 0:"skip"):"skip"}),!1))return!1}d=o,o=o.parent,s=1}return!0},_visitRowsUp:function(e,t){for(var i,n,o,r=!!t.includeHidden,s=t.start||this.rootNode.children[0];;){if((i=(o=s.parent).children)[0]===s){if(!(s=o).parent)break;i=o.children}else for(n=i.indexOf(s),s=i[n-1];(r||s.expanded)&&s.children&&s.children.length;)o=s,s=(i=s.children)[i.length-1];if((r||s.isVisible())&&!1===e(s))return!1}},warn:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),k("warn",arguments))}},e.extend(M.prototype,{nodeClick:function(e){var t,i,n=e.targetType,o=e.node;if("expander"===n){if(o.isLoading())return void o.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",e)}else if("checkbox"===n)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(i=!1,t=!0,o.folder)switch(e.options.clickFolderMode){case 2:i=!0,t=!1;break;case 3:t=!0,i=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),i&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var i,n,o,r=e.node;if(r.parent)for(n=0,o=(i=r.parent.children).length;n<o;n++)i[n]!==r&&i[n].expanded&&this._callHook("nodeSetExpanded",i[n],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){var i,o,r,s=t.originalEvent,a=t.node,l=t.tree,u=t.options,h=s.which,p=s.key||String.fromCharCode(h),f=!!(s.altKey||s.ctrlKey||s.metaKey),g=!d[h]&&!c[h]&&!f,v=e(s.target),m=!0,y=!(s.ctrlKey||!u.autoActivate);if(a||(r=this.getActiveNode()||this.getFirstChild())&&(r.setFocus(),(a=t.node=this.focusNode).debug("Keydown force focus on active node")),u.quicksearch&&g&&!v.is(":input:enabled"))return(o=Date.now())-l.lastQuicksearchTime>500&&(l.lastQuicksearchTerm=""),l.lastQuicksearchTime=o,l.lastQuicksearchTerm+=p,(i=l.findNextNode(l.lastQuicksearchTerm,l.getActiveNode()))&&i.setActive(),void s.preventDefault();switch(n.eventToString(s)){case"+":case"=":l.nodeSetExpanded(t,!0);break;case"-":l.nodeSetExpanded(t,!1);break;case"space":a.isPagingNode()?l._triggerNodeEvent("clickPaging",t,s):n.evalOption("checkbox",a,a,u,!1)?l.nodeToggleSelected(t):l.nodeSetActive(t,!0);break;case"return":l.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":a.navigate(s.which,y);break;default:m=!1}m&&s.preventDefault()},nodeLoadChildren:function(t,i){var n,o,r,s=null,a=!0,l=t.tree,c=t.node,d=c.parent,u="nodeLoadChildren",h=Date.now();return x(i)&&_(!x(i=i.call(l,{type:"source"},t)),"source callback must not return another function"),x(i.then)?s=i:i.url?(n=e.extend({},t.options.ajax,i)).debugDelay?(o=n.debugDelay,delete n.debugDelay,b(o)&&(o=o[0]+Math.random()*(o[1]-o[0])),c.warn("nodeLoadChildren waiting debugDelay "+Math.round(o)+" ms ..."),s=e.Deferred((function(t){setTimeout((function(){e.ajax(n).done((function(){t.resolveWith(this,arguments)})).fail((function(){t.rejectWith(this,arguments)}))}),o)}))):s=e.ajax(n):e.isPlainObject(i)||b(i)?(s={then:function(e,t){e(i,null,null)}},a=!1):e.error("Invalid source type: "+i),c._requestId&&(c.warn("Recursive load request #"+h+" while #"+c._requestId+" is pending."),c._requestId=h),a&&(l.debugTime(u),l.nodeSetStatus(t,"loading")),r=new e.Deferred,s.then((function(n,o,s){var a,u;if("json"!==i.dataType&&"jsonp"!==i.dataType||"string"!=typeof n||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),c._requestId&&c._requestId>h)r.rejectWith(this,["$recursive_request"]);else if(null!==c.parent||null===d){if(t.options.postProcess){try{(u=l._triggerNodeEvent("postProcess",t,t.originalEvent,{response:n,error:null,dataType:i.dataType})).error&&l.warn("postProcess returned error:",u)}catch(e){u={error:e,message:""+e,details:"postProcess failed"}}if(u.error)return a=e.isPlainObject(u.error)?u.error:{message:u.error},a=l._makeHookContext(c,null,a),void r.rejectWith(this,[a]);(b(u)||e.isPlainObject(u)&&b(u.children))&&(n=u)}else n&&w(n,"d")&&t.options.enableAspx&&(42===t.options.enableAspx&&l.warn("The default for enableAspx will change to `false` in the fututure. Pass `enableAspx: true` or implement postProcess to silence this warning."),n="string"==typeof n.d?e.parseJSON(n.d):n.d);r.resolveWith(this,[n])}else r.rejectWith(this,["$request_target_invalid"])}),(function(e,t,i){var n=l._makeHookContext(c,null,{error:e,args:Array.prototype.slice.call(arguments),message:i,details:e.status+": "+i});r.rejectWith(this,[n])})),r.done((function(i){var n,o,r;l.nodeSetStatus(t,"ok"),e.isPlainObject(i)?(_(c.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),_(b(i.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),o=i,n=i.children,delete o.children,e.each(f,(function(e,t){void 0!==o[t]&&(l[t]=o[t],delete o[t])})),e.extend(l.data,o)):n=i,_(b(n),"expected array of children"),c._setChildren(n),l.options.nodata&&0===n.length&&(x(l.options.nodata)?r=l.options.nodata.call(l,{type:"nodata"},t):!0===l.options.nodata&&c.isRootNode()?r=l.options.strings.noData:"string"==typeof l.options.nodata&&c.isRootNode()&&(r=l.options.nodata),r&&c.setStatus("nodata",r)),l._triggerNodeEvent("loadChildren",c)})).fail((function(e){var i;"$recursive_request"!==e?"$request_target_invalid"!==e?(e.node&&e.error&&e.message?i=e:"[object Object]"===(i=l._makeHookContext(c,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""})).message&&(i.message=""),c.warn("Load children failed ("+i.message+")",i),!1!==l._triggerNodeEvent("loadError",i,null)&&l.nodeSetStatus(t,"error",i.message,i.details)):c.warn("Lazy parent node was removed while loading: discarding response."):c.warn("Ignored response for obsolete load request #"+h+" (expected #"+c._requestId+")")})).always((function(){c._requestId=null,a&&l.debugTimeEnd(u)})),r.promise()},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(t,i){var n,o=t.node,r=e.extend({},t,{node:i}),s=o.children;if(1===s.length)return _(i===s[0],"invalid single child"),this.nodeRemoveChildren(t);this.activeNode&&(i===this.activeNode||this.activeNode.isDescendantOf(i))&&this.activeNode.setActive(!1),this.focusNode&&(i===this.focusNode||this.focusNode.isDescendantOf(i))&&(this.focusNode=null),this.nodeRemoveMarkup(r),this.nodeRemoveChildren(r),_((n=e.inArray(i,s))>=0,"invalid child"),o.triggerModifyChild("remove",i),i.visit((function(e){e.parent=null}),!0),this._callHook("treeRegisterNode",this,!1,i),s.splice(n,1)},nodeRemoveChildMarkup:function(t){var i=t.node;i.ul&&(i.isRootNode()?e(i.ul).empty():(e(i.ul).remove(),i.ul=null),i.visit((function(e){e.li=e.ul=null})))},nodeRemoveChildren:function(e){var t=e.tree,i=e.node;i.children&&(this.activeNode&&this.activeNode.isDescendantOf(i)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(i)&&(this.focusNode=null),this.nodeRemoveChildMarkup(e),i.triggerModifyChild("remove",null),i.visit((function(e){e.parent=null,t._callHook("treeRegisterNode",t,!1,e)})),i.lazy?i.children=[]:i.children=null,i.isRootNode()||(i.expanded=!1),this.nodeRenderStatus(e))},nodeRemoveMarkup:function(t){var i=t.node;i.li&&(e(i.li).remove(),i.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(t,i,n,o,r){var s,a,l,c,d,u,h,p=t.node,f=t.tree,g=t.options,v=g.aria,m=!1,y=p.parent,b=!y,w=p.children,x=null;if(!1!==f._enableUpdate&&(b||y.ul)){if(_(b||y.ul,"parent UL must exist"),b||(p.li&&(i||p.li.parentNode!==p.parent.ul)&&(p.li.parentNode===p.parent.ul?x=p.li.nextSibling:this.debug("Unlinking "+p+" (must be child of "+p.parent+")"),this.nodeRemoveMarkup(t)),p.li?this.nodeRenderStatus(t):(m=!0,p.li=document.createElement("li"),p.li.ftnode=p,p.key&&g.generateIds&&(p.li.id=g.idPrefix+p.key),p.span=document.createElement("span"),p.span.className="fancytree-node",v&&!p.tr&&e(p.li).attr("role","treeitem"),p.li.appendChild(p.span),this.nodeRenderTitle(t),g.createNode&&g.createNode.call(f,{type:"createNode"},t)),g.renderNode&&g.renderNode.call(f,{type:"renderNode"},t)),w){if(b||p.expanded||!0===n){for(p.ul||(p.ul=document.createElement("ul"),(!0!==o||r)&&p.expanded||(p.ul.style.display="none"),v&&e(p.ul).attr("role","group"),p.li?p.li.appendChild(p.ul):p.tree.$div.append(p.ul)),c=0,d=w.length;c<d;c++)h=e.extend({},t,{node:w[c]}),this.nodeRender(h,i,n,!1,!0);for(s=p.ul.firstChild;s;)(l=s.ftnode)&&l.parent!==p?(p.debug("_fixParent: remove missing "+l,s),u=s.nextSibling,s.parentNode.removeChild(s),s=u):s=s.nextSibling;for(s=p.ul.firstChild,c=0,d=w.length-1;c<d;c++)(a=w[c])===(l=s.ftnode)?s=s.nextSibling:p.ul.insertBefore(a.li,l.li)}}else p.ul&&(this.warn("remove child markup for "+p),this.nodeRemoveChildMarkup(t));b||m&&y.ul.insertBefore(p.li,x)}},nodeRenderTitle:function(t,i){var r,s,a,l,c,d,u,h=t.node,p=t.tree,f=t.options,g=f.aria,v=h.getLevel(),m=[];void 0!==i&&(h.title=i),h.span&&!1!==p._enableUpdate&&(c=g&&!1!==h.hasChildren()?" role='button'":"",v<f.minExpandLevel?(h.lazy||(h.expanded=!0),v>1&&m.push("<span "+c+" class='fancytree-expander fancytree-expander-fixed'></span>")):m.push("<span "+c+" class='fancytree-expander'></span>"),(r=n.evalOption("checkbox",h,h,f,!1))&&!h.isStatusNode()&&(c=g?" role='checkbox'":"",s="fancytree-checkbox",("radio"===r||h.parent&&h.parent.radiogroup)&&(s+=" fancytree-radio"),m.push("<span "+c+" class='"+s+"'></span>")),void 0!==h.data.iconClass&&(h.icon?e.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(h.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),h.icon=h.data.iconClass)),!1!==(a=n.evalOption("icon",h,h,f,!0))&&(c=g?" role='presentation'":"",u=(u=n.evalOption("iconTooltip",h,h,f,null))?" title='"+D(u)+"'":"","string"==typeof a?o.test(a)?(a="/"===a.charAt(0)?a:(f.imagePath||"")+a,m.push("<img src='"+a+"' class='fancytree-icon'"+u+" alt='' />")):m.push("<span "+c+" class='fancytree-custom-icon "+a+"'"+u+"></span>"):a.text?m.push("<span "+c+" class='fancytree-custom-icon "+(a.addClass||"")+"'"+u+">"+n.escapeHtml(a.text)+"</span>"):a.html?m.push("<span "+c+" class='fancytree-custom-icon "+(a.addClass||"")+"'"+u+">"+a.html+"</span>"):m.push("<span "+c+" class='fancytree-icon'"+u+"></span>")),l="",f.renderTitle&&(l=f.renderTitle.call(p,{type:"renderTitle"},t)||""),l||(!0===(d=n.evalOption("tooltip",h,h,f,null))&&(d=h.title),l="<span class='fancytree-title'"+(d=d?" title='"+D(d)+"'":"")+(f.titlesTabbable?" tabindex='0'":"")+">"+(f.escapeTitles?n.escapeHtml(h.title):h.title)+"</span>"),m.push(l),h.span.innerHTML=m.join(""),this.nodeRenderStatus(t),f.enhanceTitle&&(t.$title=e(">span.fancytree-title",h.span),l=f.enhanceTitle.call(p,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var i,o=t.node,r=t.tree,s=t.options,a=o.hasChildren(),l=o.isLastSibling(),c=s.aria,d=s._classNames,u=[],h=o[r.statusClassPropName];h&&!1!==r._enableUpdate&&(c&&(i=e(o.tr||o.li)),u.push(d.node),r.activeNode===o&&u.push(d.active),r.focusNode===o&&u.push(d.focused),o.expanded&&u.push(d.expanded),c&&(!1===a?i.removeAttr("aria-expanded"):i.attr("aria-expanded",Boolean(o.expanded))),o.folder&&u.push(d.folder),!1!==a&&u.push(d.hasChildren),l&&u.push(d.lastsib),o.lazy&&null==o.children&&u.push(d.lazy),o.partload&&u.push(d.partload),o.partsel&&u.push(d.partsel),n.evalOption("unselectable",o,o,s,!1)&&u.push(d.unselectable),o._isLoading&&u.push(d.loading),o._error&&u.push(d.error),o.statusNodeType&&u.push(d.statusNodePrefix+o.statusNodeType),o.selected?(u.push(d.selected),c&&i.attr("aria-selected",!0)):c&&i.attr("aria-selected",!1),o.extraClasses&&u.push(o.extraClasses),!1===a?u.push(d.combinedExpanderPrefix+"n"+(l?"l":"")):u.push(d.combinedExpanderPrefix+(o.expanded?"e":"c")+(o.lazy&&null==o.children?"d":"")+(l?"l":"")),u.push(d.combinedIconPrefix+(o.expanded?"e":"c")+(o.folder?"f":"")),h.className=u.join(" "),o.li&&e(o.li).toggleClass(d.lastsib,l))},nodeSetActive:function(t,i,n){n=n||{};var o,r=t.node,s=t.tree,a=t.options,l=!0===n.noEvents,c=!0===n.noFocus,d=!1!==n.scrollIntoView;return r===s.activeNode==(i=!1!==i)?P(r):(d&&t.originalEvent&&e(t.originalEvent.target).is("a,:checkbox")&&(r.info("Not scrolling while clicking an embedded link."),d=!1),i&&!l&&!1===this._triggerNodeEvent("beforeActivate",r,t.originalEvent)?T(r,["rejected"]):(i?(s.activeNode&&(_(s.activeNode!==r,"node was active (inconsistency)"),o=e.extend({},t,{node:s.activeNode}),s.nodeSetActive(o,!1),_(null===s.activeNode,"deactivate was out of sync?")),a.activeVisible&&r.makeVisible({scrollIntoView:d}),s.activeNode=r,s.nodeRenderStatus(t),c||s.nodeSetFocus(t),l||s._triggerNodeEvent("activate",r,t.originalEvent)):(_(s.activeNode===r,"node was not active (inconsistency)"),s.activeNode=null,this.nodeRenderStatus(t),l||t.tree._triggerNodeEvent("deactivate",r,t.originalEvent)),P(r)))},nodeSetExpanded:function(t,i,n){n=n||{};var o,r,s,a,l,c,d=t.node,u=t.tree,h=t.options,p=!0===n.noAnimation,f=!0===n.noEvents;if(i=!1!==i,e(d.li).hasClass(h._classNames.animating))return d.warn("setExpanded("+i+") while animating: ignored."),T(d,["recursion"]);if(d.expanded&&i||!d.expanded&&!i)return P(d);if(i&&!d.lazy&&!d.hasChildren())return P(d);if(!i&&d.getLevel()<h.minExpandLevel)return T(d,["locked"]);if(!f&&!1===this._triggerNodeEvent("beforeExpand",d,t.originalEvent))return T(d,["rejected"]);if(p||d.isVisible()||(p=n.noAnimation=!0),r=new e.Deferred,i&&!d.expanded&&h.autoCollapse){l=d.getParentList(!1,!0),c=h.autoCollapse;try{for(h.autoCollapse=!1,s=0,a=l.length;s<a;s++)this._callHook("nodeCollapseSiblings",l[s],n)}finally{h.autoCollapse=c}}return r.done((function(){var e=d.getLastChild();i&&h.autoScroll&&!p&&e&&u._enableUpdate?e.scrollIntoView(!0,{topNode:d}).always((function(){f||t.tree._triggerNodeEvent(i?"expand":"collapse",t)})):f||t.tree._triggerNodeEvent(i?"expand":"collapse",t)})),o=function(n){var o=h._classNames,r=h.toggleEffect;if(d.expanded=i,u._callHook("treeStructureChanged",t,i?"expand":"collapse"),u._callHook("nodeRender",t,!1,!1,!0),d.ul)if("none"!==d.ul.style.display==!!d.expanded)d.warn("nodeSetExpanded: UL.style.display already set");else{if(r&&!p)return e(d.li).addClass(o.animating),void(x(e(d.ul)[r.effect])?e(d.ul)[r.effect]({duration:r.duration,always:function(){e(this).removeClass(o.animating),e(d.li).removeClass(o.animating),n()}}):(e(d.ul).stop(!0,!0),e(d.ul).parent().find(".ui-effects-placeholder").remove(),e(d.ul).toggle(r.effect,r.options,r.duration,(function(){e(this).removeClass(o.animating),e(d.li).removeClass(o.animating),n()}))));d.ul.style.display=d.expanded||!parent?"":"none"}n()},i&&d.lazy&&void 0===d.hasChildren()?d.load().done((function(){r.notifyWith&&r.notifyWith(d,["loaded"]),o((function(){r.resolveWith(d)}))})).fail((function(e){o((function(){r.rejectWith(d,["load failed ("+e+")"])}))})):o((function(){r.resolveWith(d)})),r.promise()},nodeSetFocus:function(t,i){var n,o=t.tree,r=t.node,s=o.options,a=!!t.originalEvent&&e(t.originalEvent.target).is(":input");if(i=!1!==i,o.focusNode){if(o.focusNode===r&&i)return;n=e.extend({},t,{node:o.focusNode}),o.focusNode=null,this._triggerNodeEvent("blur",n),this._callHook("nodeRenderStatus",n)}i&&(this.hasFocus()||(r.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),r.makeVisible({scrollIntoView:!1}),o.focusNode=r,s.titlesTabbable&&(a||e(r.span).find(".fancytree-title").focus()),s.aria&&e(o.$container).attr("aria-activedescendant",e(r.tr||r.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",t),document.activeElement===o.$container.get(0)||e(document.activeElement,o.$container).length>=1||e(o.$container).focus(),s.autoScroll&&r.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t,i){i=i||{};var o=e.node,r=e.tree,s=e.options,a=!0===i.noEvents,l=o.parent;if(t=!1!==t,!n.evalOption("unselectable",o,o,s,!1)){if(o._lastSelectIntent=t,!!o.selected===t&&(3!==s.selectMode||!o.partsel||t))return t;if(!a&&!1===this._triggerNodeEvent("beforeSelect",o,e.originalEvent))return!!o.selected;t&&1===s.selectMode?(r.lastSelectedNode&&r.lastSelectedNode.setSelected(!1),o.selected=t):3!==s.selectMode||!l||l.radiogroup||o.radiogroup?l&&l.radiogroup?o.visitSiblings((function(e){e._changeSelectStatusAttrs(t&&e===o)}),!0):o.selected=t:(o.selected=t,o.fixSelection3AfterClick(i)),this.nodeRenderStatus(e),r.lastSelectedNode=t?o:null,a||r._triggerNodeEvent("select",e)}},nodeSetStatus:function(t,i,n,o){var r=t.node,s=t.tree;function a(i,n){var o=r.children?r.children[0]:null;return o&&o.isStatusNode()?(e.extend(o,i),o.statusNodeType=n,s._callHook("nodeRenderTitle",o)):(r._setChildren([i]),s._callHook("treeStructureChanged",t,"setStatusNode"),r.children[0].statusNodeType=n,s.render()),r.children[0]}switch(i){case"ok":!function(){var e=r.children?r.children[0]:null;if(e&&e.isStatusNode()){try{r.ul&&(r.ul.removeChild(e.li),e.li=null)}catch(e){}1===r.children.length?r.children=[]:r.children.shift(),s._callHook("treeStructureChanged",t,"clearStatusNode")}}(),r._isLoading=!1,r._error=null,r.renderStatus();break;case"loading":r.parent||a({title:s.options.strings.loading+(n?" ("+n+")":""),checkbox:!1,tooltip:o},i),r._isLoading=!0,r._error=null,r.renderStatus();break;case"error":a({title:s.options.strings.loadError+(n?" ("+n+")":""),checkbox:!1,tooltip:o},i),r._isLoading=!1,r._error={message:n,details:o},r.renderStatus();break;case"nodata":a({title:n||s.options.strings.noData,checkbox:!1,tooltip:o},i),r._isLoading=!1,r._error=null,r.renderStatus();break;default:e.error("invalid node status "+i)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){var t=e.node,i=!t.selected;return t.partsel&&!t.selected&&!0===t._lastSelectIntent&&(i=!1,t.selected=!0),t._lastSelectIntent=i,this.nodeSetSelected(e,i)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null,t._callHook("treeStructureChanged",e,"clear")},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("fancytree-helper-hidden")},treeInit:function(t){var i=t.tree,n=i.options;i.$container.attr("tabindex",n.tabindex),e.each(f,(function(e,t){void 0!==n[t]&&(i.info("Move option "+t+" to tree"),i[t]=n[t],delete n[t])})),n.checkboxAutoHide&&i.$container.addClass("fancytree-checkbox-auto-hide"),n.rtl?i.$container.attr("DIR","RTL").addClass("fancytree-rtl"):i.$container.removeAttr("DIR").removeClass("fancytree-rtl"),n.aria&&(i.$container.attr("role","tree"),1!==n.selectMode&&i.$container.attr("aria-multiselectable",!0)),this.treeLoad(t)},treeLoad:function(t,i){var o,r,s,a=t.tree,l=t.widget.element,c=e.extend({},t,{node:this.rootNode});if(a.rootNode.children&&this.treeClear(t),i=i||this.options.source)"string"==typeof i&&e.error("Not implemented");else switch(r=l.data("type")||"html"){case"html":(s=l.find(">ul").not(".fancytree-container").first()).length?(s.addClass("ui-fancytree-source fancytree-helper-hidden"),i=e.ui.fancytree.parseHtml(s),this.data=e.extend(this.data,A(s))):(n.warn("No `source` option was passed and container does not contain `<ul>`: assuming `source: []`."),i=[]);break;case"json":i=e.parseJSON(l.text()),l.contents().filter((function(){return 3===this.nodeType})).remove(),e.isPlainObject(i)&&(_(b(i.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),o=i,i=i.children,delete o.children,e.each(f,(function(e,t){void 0!==o[t]&&(a[t]=o[t],delete o[t])})),e.extend(a.data,o));break;default:e.error("Invalid data-type: "+r)}return a._triggerTreeEvent("preInit",null),this.nodeLoadChildren(c,i).done((function(){a._callHook("treeStructureChanged",t,"loadChildren"),a.render(),3===t.options.selectMode&&a.rootNode.fixSelection3FromEndNodes(),a.activeNode&&a.options.activeVisible&&a.activeNode.makeVisible(),a._triggerTreeEvent("init",null,{status:!0})})).fail((function(){a.render(),a._triggerTreeEvent("init",null,{status:!1})}))},treeRegisterNode:function(e,t,i){e.tree._callHook("treeStructureChanged",e,t?"addNode":"removeNode")},treeSetFocus:function(t,i,n){var o;(i=!1!==i)!==this.hasFocus()&&(this._hasFocus=i,!i&&this.focusNode?this.focusNode.setFocus(!1):!i||n&&n.calledByNode||e(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",i),this._triggerTreeEvent(i?"focusTree":"blurTree"),i&&!this.activeNode&&(o=this._lastMousedownNode||this.getFirstChild())&&o.setFocus())},treeSetOption:function(t,i,n){var o=t.tree,r=!0,s=!1,a=!1;switch(i){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":s=!0,a=!0;break;case"checkboxAutoHide":o.$container.toggleClass("fancytree-checkbox-auto-hide",!!n);break;case"escapeTitles":case"tooltip":a=!0;break;case"rtl":!1===n?o.$container.removeAttr("DIR").removeClass("fancytree-rtl"):o.$container.attr("DIR","RTL").addClass("fancytree-rtl"),a=!0;break;case"source":r=!1,o._callHook("treeLoad",o,n),a=!0}o.debug("set option "+i+"="+n+" <"+typeof n+">"),r&&(this.widget._super?this.widget._super.call(this.widget,i,n):e.Widget.prototype._setOption.call(this.widget,i,n)),s&&o._callHook("treeCreate",o),a&&o.render(!0,!1)},treeStructureChanged:function(e,t){}}),e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,copyFunctionsToData:!1,debugLevel:null,disabled:!1,enableAspx:42,escapeTitles:!1,extensions:[],focusOnSelect:!1,generateIds:!1,icon:!0,idPrefix:"ft_",keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,nodata:!0,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,toggleEffect:{effect:"slideToggle",duration:200},tooltip:!1,treeId:null,_classNames:{active:"fancytree-active",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",error:"fancytree-error",expanded:"fancytree-expanded",focused:"fancytree-focused",folder:"fancytree-folder",hasChildren:"fancytree-has-children",lastsib:"fancytree-lastsib",lazy:"fancytree-lazy",loading:"fancytree-loading",node:"fancytree-node",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",selected:"fancytree-selected",statusNodePrefix:"fancytree-statusnode-",unselectable:"fancytree-unselectable"},lazyLoad:null,postProcess:null},_deprecationWarning:function(e){var t=this.tree;t&&t.options.debugLevel>=3&&t.warn("$().fancytree('"+e+"') is deprecated (see https://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree_Widget.html")},_create:function(){this.tree=new M(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul").first();var t,i,n,o=this.options,r=o.extensions;this.tree;for(n=0;n<r.length;n++)i=r[n],(t=e.ui.fancytree._extensions[i])||e.error("Could not apply extension '"+i+"' (it is not registered, did you forget to include it?)"),this.tree.options[i]=N({},t.options,this.tree.options[i]),_(void 0===this.tree.ext[i],"Extension name must not exist as Fancytree.ext attribute: '"+i+"'"),this.tree.ext[i]={},E(this.tree,0,t,i),t;void 0!==o.icons&&(!0===o.icon?(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.icons):e.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead")),void 0!==o.iconClass&&(o.icon?e.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.iconClass)),void 0!==o.tabbable&&(o.tabindex=o.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+o.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},_destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree)},_unbind:function(){var t=this.tree._ns;this.element.off(t),this.tree.$container.off(t),e(document).off(t)},_bind:function(){var t=this,i=this.options,o=this.tree,r=o._ns;this._unbind(),o.$container.on("focusin"+r+" focusout"+r,(function(t){var i=n.getNode(t),r="focusin"===t.type;if(!r&&i&&e(t.target).is("a"))i.debug("Ignored focusout on embedded <a> element.");else{if(r){if(o._getExpiringValue("focusin"))return void o.debug("Ignored double focusin.");o._setExpiringValue("focusin",!0,50),i||(i=o._getExpiringValue("mouseDownNode"))&&o.debug("Reconstruct mouse target for focusin from recent event.")}i?o._callHook("nodeSetFocus",o._makeHookContext(i,t),r):o.tbody&&e(t.target).parents("table.fancytree-container > thead").length?o.debug("Ignore focus event outside table body.",t):o._callHook("treeSetFocus",o,r)}})).on("selectstart"+r,"span.fancytree-title",(function(e){e.preventDefault()})).on("keydown"+r,(function(e){if(i.disabled||!1===i.keyboard)return!0;var t,n=o.focusNode,r=o._makeHookContext(n||o,e),s=o.phase;try{return o.phase="userEvent","preventNav"===(t=n?o._triggerNodeEvent("keydown",n,e):o._triggerTreeEvent("keydown",e))?t=!0:!1!==t&&(t=o._callHook("nodeKeydown",r)),t}finally{o.phase=s}})).on("mousedown"+r,(function(e){var t=n.getEventTarget(e);o._lastMousedownNode=t?t.node:null,o._setExpiringValue("mouseDownNode",o._lastMousedownNode)})).on("click"+r+" dblclick"+r,(function(e){if(i.disabled)return!0;var o,r=n.getEventTarget(e),s=r.node,a=t.tree,l=a.phase;if(!s)return!0;o=a._makeHookContext(s,e);try{switch(a.phase="userEvent",e.type){case"click":return o.targetType=r.type,s.isPagingNode()?!0===a._triggerNodeEvent("clickPaging",o,e):!1!==a._triggerNodeEvent("click",o,e)&&a._callHook("nodeClick",o);case"dblclick":return o.targetType=r.type,!1!==a._triggerNodeEvent("dblclick",o,e)&&a._callHook("nodeDblclick",o)}}finally{a.phase=l}}))},getActiveNode:function(){return this._deprecationWarning("getActiveNode"),this.tree.activeNode},getNodeByKey:function(e){return this._deprecationWarning("getNodeByKey"),this.tree.getNodeByKey(e)},getRootNode:function(){return this._deprecationWarning("getRootNode"),this.tree.rootNode},getTree:function(){return this._deprecationWarning("getTree"),this.tree}}),n=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.38.3",buildType:"production",debugLevel:3,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:M,_FancytreeNodeClass:L,jquerySupports:{positionMyOfs:function(t,i,n,o){var r,s,a,l=e.map(C(t).split("."),(function(e){return parseInt(e,10)})),c=e.map(Array.prototype.slice.call(arguments,1),(function(e){return parseInt(e,10)}));for(r=0;r<c.length;r++)if(s=l[r]||0,a=c[r]||0,s!==a)return s>a;return!0}(e.ui.version,1,9)},assert:function(e,t){return _(e,t)},createTree:function(t,i){var o=e(t).fancytree(i);return n.getTree(o)},debounce:function(e,t,i,n){var o;return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),function(){var r=arguments;n=n||this,i&&!o&&t.apply(n,r),clearTimeout(o),o=setTimeout((function(){i||t.apply(n,r),o=null}),e)}},debug:function(t){e.ui.fancytree.debugLevel>=4&&k("log",arguments)},error:function(t){e.ui.fancytree.debugLevel>=1&&k("error",arguments)},escapeHtml:function(e){return(""+e).replace(r,(function(e){return a[e]}))},fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){var i=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),o=(i[2]?+i[2]:0)+(n[2]?+n[2]:0),r=(i[4]?+i[4]:0)+(n[4]?+n[4]:0);t=e.extend({},t,{my:i[1]+" "+i[3],at:n[1]+" "+n[3]}),(o||r)&&(t.offset=o+" "+r)}return t},getEventTarget:function(t){var i,o=t&&t.target?t.target.className:"",r={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(o)?r.type="title":/\bfancytree-expander\b/.test(o)?r.type=!1===r.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(o)?r.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(o)?r.type="icon":/\bfancytree-node\b/.test(o)?r.type="title":t&&t.target&&((i=e(t.target)).is("ul[role=group]")?((r.node&&r.node.tree||n).debug("Ignoring click on outer UL."),r.node=null):i.closest(".fancytree-title").length?r.type="title":i.closest(".fancytree-checkbox").length?r.type="checkbox":i.closest(".fancytree-expander").length&&(r.type="expander")),r},getEventTargetType:function(e){return this.getEventTarget(e).type},getNode:function(t){if(t instanceof L)return t;for(t instanceof e?t=t[0]:void 0!==t.originalEvent&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var i,n=t;return t instanceof M?t:(void 0===t&&(t=0),"number"==typeof t?t=e(".fancytree-container").eq(t):"string"==typeof t?(t=e("#ft-id-"+n).eq(0)).length||(t=e(n).eq(0)):t instanceof Element||t instanceof HTMLDocument?t=e(t):t instanceof e?t=t.eq(0):void 0!==t.originalEvent&&(t=e(t.target)),(i=(t=t.closest(":ui-fancytree")).data("ui-fancytree")||t.data("fancytree"))?i.tree:null)},evalOption:function(e,t,i,n,o){var r,s,a=t.tree,l=n[e],c=i[e];return x(l)?(r={node:t,tree:a,widget:a.widget,options:a.widget.options,typeInfo:a.types[t.type]||{}},null==(s=l.call(a,{type:e},r))&&(s=c)):s=null==c?l:c,null==s&&(s=o),s},setSpanIcon:function(t,i,n){var o=e(t);"string"==typeof n?o.attr("class",i+" "+n):(n.text?o.text(""+n.text):n.html&&(t.innerHTML=n.html),o.attr("class",i+" "+(n.addClass||"")))},eventToString:function(e){var t=e.which,i=e.type,n=[];return e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),e.shiftKey&&n.push("shift"),"click"===i||"dblclick"===i?n.push(u[e.button]+i):"wheel"===i?n.push(i):l[t]||n.push(c[t]||String.fromCharCode(t).toLowerCase()),n.join("+")},info:function(t){e.ui.fancytree.debugLevel>=3&&k("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(t,i,n,o){var r,s=t[i]||e.noop;t[i]=function(){var e=o||this;try{return r=e._super,e._super=s,n.apply(e,arguments)}finally{e._super=r}}},parseHtml:function(t){var i,n,o,r,s,a,l,c,d=t.find(">li"),u=[];return d.each((function(){var d,f,v=e(this),y=v.find(">span",this).first(),b=y.length?null:v.find(">a").first(),_={tooltip:null,data:{}};for(y.length?_.title=y.html():b&&b.length?(_.title=b.html(),_.data.href=b.attr("href"),_.data.target=b.attr("target"),_.tooltip=b.attr("title")):(_.title=v.html(),(s=_.title.search(/<ul/i))>=0&&(_.title=_.title.substring(0,s))),_.title=C(_.title),r=0,a=h.length;r<a;r++)_[h[r]]=void 0;for(i=this.className.split(" "),o=[],r=0,a=i.length;r<a;r++)n=i[r],p[n]?_[n]=!0:o.push(n);if(_.extraClasses=o.join(" "),(l=v.attr("title"))&&(_.tooltip=l),(l=v.attr("id"))&&(_.key=l),v.attr("hideCheckbox")&&(_.checkbox=!1),(d=A(v))&&!e.isEmptyObject(d)){for(f in m)w(d,f)&&(d[m[f]]=d[f],delete d[f]);for(r=0,a=g.length;r<a;r++)l=g[r],null!=(c=d[l])&&(delete d[l],_[l]=c);e.extend(_.data,d)}(t=v.find(">ul").first()).length?_.children=e.ui.fancytree.parseHtml(t):_.children=_.lazy?void 0:null,u.push(_)})),u},registerExtension:function(t){_(null!=t.name,"extensions must have a `name` property."),_(null!=t.version,"extensions must have a `version` property."),e.ui.fancytree._extensions[t.name]=t},trim:C,unescapeHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},warn:function(t){e.ui.fancytree.debugLevel>=2&&k("warn",arguments)}}),e.ui.fancytree}function _(t,i){t||(i="Fancytree assertion failed"+(i=i?": "+i:""),e.ui.fancytree.error(i),e.error(i))}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e){return"function"==typeof e}function C(e){return null==e?"":e.trim()}function k(e,t){var i,n,o=window.console?window.console[e]:null;if(o)try{o.apply(window.console,t)}catch(e){for(n="",i=0;i<t.length;i++)n+=t[i];o(n)}}function N(){var t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length;if("object"==typeof s||x(s)||(s={}),a===l)throw Error("need at least two args");for(;a<l;a++)if(null!=(t=arguments[a]))for(i in t)if(w(t,i)){if(n=s[i],s===(o=t[i]))continue;o&&e.isPlainObject(o)?(r=n&&e.isPlainObject(n)?n:{},s[i]=N(r,o)):void 0!==o&&(s[i]=o)}return s}function S(e,t,i,n,o){var r,s,a,l,c;return r=t[e],s=n[e],a=t.ext[o],l=function(){return r.apply(t,arguments)},c=function(e){return r.apply(t,e)},function(){var e=t._local,i=t._super,n=t._superApply;try{return t._local=a,t._super=l,t._superApply=c,s.apply(t,arguments)}finally{t._local=e,t._super=i,t._superApply=n}}}function E(t,i,n,o){for(var r in n)"function"==typeof n[r]?"function"==typeof t[r]?t[r]=S(r,t,0,n,o):"_"===r.charAt(0)?t.ext[o][r]=S(r,t,0,n,o):e.error("Could not override tree."+r+". Use prefix '_' to create tree."+o+"._"+r):"options"!==r&&(t.ext[o][r]=n[r])}function P(t,i){return void 0===t?e.Deferred((function(){this.resolve()})).promise():e.Deferred((function(){this.resolveWith(t,i)})).promise()}function T(t,i){return void 0===t?e.Deferred((function(){this.reject()})).promise():e.Deferred((function(){this.rejectWith(t,i)})).promise()}function O(e,t){return function(){e.resolveWith(t)}}function A(t){var i=e.extend({},t.data()),n=i.json;return delete i.fancytree,delete i.uiFancytree,n&&(delete i.json,i=e.extend(i,n)),i}function D(e){return(""+e).replace(s,(function(e){return a[e]}))}function H(e){return e=e.toLowerCase(),function(t){return t.title.toLowerCase().indexOf(e)>=0}}function L(t,i){var o,r,s,a;for(this.parent=t,this.tree=t.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},o=0,r=g.length;o<r;o++)this[s=g[o]]=i[s];for(s in null==this.unselectableIgnore&&null==this.unselectableStatus||(this.unselectable=!0),i.hideCheckbox&&e.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),i.data&&e.extend(this.data,i.data),i)v[s]||!this.tree.options.copyFunctionsToData&&x(i[s])||y[s]||(this.data[s]=i[s]);null==this.key?this.tree.options.defaultKey?(this.key=""+this.tree.options.defaultKey(this),_(this.key,"defaultKey() must return a unique key")):this.key="_"+n._nextNodeKey++:this.key=""+this.key,i.active&&(_(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),i.selected&&(this.tree.lastSelectedNode=this),(a=i.children)?a.length?this._setChildren(a):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function M(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(void 0!==this.options.lazyload&&e.error("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),void 0!==this.options.loaderror&&e.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),void 0!==this.options.fx&&e.error("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),void 0!==this.options.removeNode&&e.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.types={},this.columns={},this.data=A(this.$div),this._id=""+(this.options.treeId||e.ui.fancytree._nextId++),this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._tempCache={},this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.viewport=null,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var i,o={tree:this};this.rootNode=new L(o,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,i=e("<ul>",{id:"ft-id-"+this._id,class:"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=i,this.rootNode.ul=i[0],null==this.options.debugLevel&&(this.options.debugLevel=n.debugLevel)}e.ui.fancytree.warn("Fancytree: ignored duplicate include")})?n.apply(t,o):n)||(e.exports=r)},function(e,t,i){var n,o,r;
/*!
 * jQuery UI Draggable 1.13.3
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */!function(s){"use strict";o=[i(0),i(31),i(57),i(58),i(59),i(60),i(61),i(2),i(17)],void 0===(r="function"==typeof(n=function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.13.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",t)&&i._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n="function"==typeof i.helper,o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(i=e(o.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each((function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))}))},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,(function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(t),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",t,o))}))},drag:function(t,i,n){e.each(n.sortables,(function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o}))),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,i,n){var o,r,s,a,l,c,d,u,h,p,f=n.options,g=f.snapTolerance,v=i.offset.left,m=v+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)c=(l=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,u=(d=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,m<l-g||v>c+g||b<d-g||y>u+g||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(d-b)<=g,r=Math.abs(u-y)<=g,s=Math.abs(l-m)<=g,a=Math.abs(c-v)<=g,o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(d-y)<=g,r=Math.abs(u-b)<=g,s=Math.abs(l-v)<=g,a=Math.abs(c-m)<=g,o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||r||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||r||s||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,s=e.makeArray(e(r.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each((function(t){e(this).css("zIndex",o+t)})),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}}),e.ui.draggable})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;
/*!
 * jQuery UI Mouse 1.13.3
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */!function(s){"use strict";o=[i(0),i(56),i(2),i(17)],void 0===(r="function"==typeof(n=function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.13.3",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,r=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){i(33),i(35),i(40),i(45),e.exports=i(8).Map},function(e,t,i){"use strict";var n=i(18),o={};o[i(1)("toStringTag")]="z",o+""!="[object z]"&&i(6)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,i){var n=i(3),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,i){"use strict";var n=i(36)(!0);i(12)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},function(e,t,i){var n=i(22),o=i(11);e.exports=function(e){return function(t,i){var r,s,a=String(o(t)),l=n(i),c=a.length;return l<0||l>=c?e?"":void 0:(r=a.charCodeAt(l))<55296||r>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):r:e?a.slice(l,l+2):s-56320+(r-55296<<10)+65536}}},function(e,t){e.exports=!1},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){"use strict";var n=i(5),o=i(20),r=i(15),s={};i(4)(s,i(1)("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n.create(s,{next:o(1,i)}),r(e,t+" Iterator")}},function(e,t,i){i(41);var n=i(3),o=i(4),r=i(7),s=i(1)("iterator"),a=n.NodeList,l=n.HTMLCollection,c=a&&a.prototype,d=l&&l.prototype,u=r.NodeList=r.HTMLCollection=r.Array;c&&!c[s]&&o(c,s,u),d&&!d[s]&&o(d,s,u)},function(e,t,i){"use strict";var n=i(42),o=i(24),r=i(7),s=i(43);e.exports=i(12)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(e,t,i){var n=i(1)("unscopables"),o=Array.prototype;null==o[n]&&i(4)(o,n,{}),e.exports=function(e){o[n][e]=!0}},function(e,t,i){var n=i(44),o=i(11);e.exports=function(e){return n(o(e))}},function(e,t,i){var n=i(19);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){"use strict";var n=i(46);i(52)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},function(e,t,i){"use strict";var n=i(5),o=i(4),r=i(25),s=i(13),a=i(26),l=i(11),c=i(27),d=i(12),u=i(24),h=i(9)("id"),p=i(14),f=i(16),g=i(51),v=i(10),m=Object.isExtensible||f,y=v?"_s":"size",b=0,_=function(e,t){if(!f(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!p(e,h)){if(!m(e))return"F";if(!t)return"E";o(e,h,++b)}return"O"+e[h]},w=function(e,t){var i,n=_(t);if("F"!==n)return e._i[n];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,o){var d=e((function(e,r){a(e,d,t),e._i=n.create(null),e._f=void 0,e._l=void 0,e[y]=0,null!=r&&c(r,i,e[o],e)}));return r(d.prototype,{clear:function(){for(var e=this._i,t=this._f;t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete e[t.i];this._f=this._l=void 0,this[y]=0},delete:function(e){var t=w(this,e);if(t){var i=t.n,n=t.p;delete this._i[t.i],t.r=!0,n&&(n.n=i),i&&(i.p=n),this._f==t&&(this._f=i),this._l==t&&(this._l=n),this[y]--}return!!t},forEach:function(e){for(var t,i=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(i(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!w(this,e)}}),v&&n.setDesc(d.prototype,"size",{get:function(){return l(this[y])}}),d},def:function(e,t,i){var n,o,r=w(e,t);return r?r.v=i:(e._l=r={i:o=_(t,!0),k:t,v:i,p:n=e._l,n:void 0,r:!1},e._f||(e._f=r),n&&(n.n=r),e[y]++,"F"!==o&&(e._i[o]=r)),e},getEntry:w,setStrong:function(e,t,i){d(e,t,(function(e,t){this._t=e,this._k=t,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),i?"entries":"values",!i,!0),g(t)}}},function(e,t,i){var n=i(28);e.exports=function(e,t,i,o){try{return o?t(n(i)[0],i[1]):t(i)}catch(t){var r=e.return;throw void 0!==r&&n(r.call(e)),t}}},function(e,t,i){var n=i(7),o=i(1)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||r[o]===e)}},function(e,t,i){var n=i(22),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,i){var n=i(18),o=i(1)("iterator"),r=i(7);e.exports=i(8).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||r[n(e)]}},function(e,t,i){"use strict";var n=i(3),o=i(5),r=i(10),s=i(1)("species");e.exports=function(e){var t=n[e];r&&t&&!t[s]&&o.setDesc(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,i){"use strict";var n=i(3),o=i(23),r=i(6),s=i(25),a=i(27),l=i(26),c=i(16),d=i(21),u=i(53),h=i(15);e.exports=function(e,t,i,p,f,g){var v=n[e],m=v,y=f?"set":"add",b=m&&m.prototype,_={},w=function(e){var t=b[e];r(b,e,"delete"==e||"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,i){return t.call(this,0===e?0:e,i),this})};if("function"==typeof m&&(g||b.forEach&&!d((function(){(new m).entries().next()})))){var x,C=new m,k=C[y](g?{}:-0,1)!=C,N=d((function(){C.has(1)}));u((function(e){new m(e)}))||((m=t((function(t,i){l(t,m,e);var n=new v;return null!=i&&a(i,f,n[y],n),n}))).prototype=b,b.constructor=m),g||C.forEach((function(e,t){x=1/t==-1/0})),(N||x)&&(w("delete"),w("has"),f&&w("get")),(x||k)&&w(y),g&&b.clear&&delete b.clear}else m=p.getConstructor(t,e,f,y),s(m.prototype,i);return h(m,e),_[e]=m,o(o.G+o.W+o.F*(m!=v),_),g||p.setStrong(m,e,f),m}},function(e,t,i){var n=i(1)("iterator"),o=!1;try{var r=[7][n]();r.return=function(){o=!0},Array.from(r,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var i=!1;try{var r=[7],s=r[n]();s.next=function(){return{done:i=!0}},r[n]=function(){return s},e(r)}catch(e){}return i}},function(e,t,i){var n,o,r;
/*! jQuery UI - v1.13.2 - 2022-08-16
* http://jqueryui.com
* Includes: widget.js, position.js, jquery-patch.js, keycode.js, scroll-parent.js, unique-id.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */!function(s){"use strict";o=[i(0)],void 0===(r="function"==typeof(n=function(e){e.ui=e.ui||{};e.ui.version="1.13.2";
/*!
 * jQuery UI Widget 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var t=0,i=Array.prototype.hasOwnProperty,n=Array.prototype.slice;e.cleanData=e.cleanData||(o=e.cleanData,function(t){var i,n,r;for(r=0;null!=(n=t[r]);r++)(i=e._data(n,"events"))&&i.remove&&e(n).triggerHandler("remove");o(t)}),e.widget=e.widget||function(t,i,n){var o,r,s,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return n||(n=i,i=e.Widget),Array.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr.pseudos[c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this||!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new i).options=e.widget.extend({},s.options),e.each(n,(function(e,t){a[e]="function"==typeof t?function(){function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=n,this._superApply=o,e=t.apply(this,arguments),this._super=i,this._superApply=r,e}}():t})),r.prototype=e.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},a,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)})),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;a<l;a++)for(o in s[a])r=s[a][o],i.call(s[a],o)&&void 0!==r&&(e.isPlainObject(r)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],r):e.widget.extend({},r):t[o]=r);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each((function(){var i,n=e.data(this,o);return"instance"===r?(l=n,!1):n?"function"!=typeof n[r]||"_"===r.charAt(0)?e.error("no such method '"+r+"' for "+t+" widget instance"):(i=n[r].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):l=void 0:(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each((function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new i(r,this))}))),l}},e.Widget=e.Widget||function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function o(){var i=[];t.element.each((function(t,o){e.map(n.classesElementLookup,(function(e){return e})).some((function(e){return e.is(o)}))||i.push(o)})),n._on(e(i),{remove:"_untrackClassesElement"})}function r(r,s){var a,l;for(l=0;l<r.length;l++)a=n.classesElementLookup[r[l]]||e(),t.add?(o(),a=e(e.uniqueSort(a.get().concat(t.element.get())))):a=e(a.not(t.element).get()),n.classesElementLookup[r[l]]=a,i.push(r[l]),s&&t.classes[r[l]]&&i.push(t.classes[r[l]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))})),this._off(e(t.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,r={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,(function(n,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?o.on(c,d,a):i.on(c,a)}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!("function"==typeof s&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){var s;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})?o={duration:o}:!0===o&&(o={}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue((function(i){e(this)[t](),r&&r.call(n[0]),i()}))}}));var o;e.widget;
/*!
 * jQuery UI Position 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */!function(){var t,i=Math.max,n=Math.abs,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function d(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function u(t,i){return parseInt(e.css(t,i),10)||0}function h(e){return null!=e&&e===e.window}function p(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:h(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}e.position=e.position||{scrollbarWidth:function(){if(void 0!==t)return t;var i,n,o=e("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),i===(n=r.offsetWidth)&&(n=o[0].clientWidth),o.remove(),t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=h(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);var l,h,f,g,v,m,y="string"==typeof(t=e.extend({},t)).of?e(document).find(t.of):e(t.of),b=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(b),w=(t.collision||"flip").split(" "),x={};return m=p(y),y[0].preventDefault&&(t.at="left top"),h=m.width,f=m.height,g=m.offset,v=e.extend({},g),e.each(["my","at"],(function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",e=s.exec(n[0]),i=s.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?v.left+=h:"center"===t.at[0]&&(v.left+=h/2),"bottom"===t.at[1]?v.top+=f:"center"===t.at[1]&&(v.top+=f/2),l=d(x.at,h,f),v.left+=l[0],v.top+=l[1],this.each((function(){var o,r,s=e(this),a=s.outerWidth(),c=s.outerHeight(),p=u(this,"marginLeft"),m=u(this,"marginTop"),C=a+p+u(this,"marginRight")+_.width,k=c+m+u(this,"marginBottom")+_.height,N=e.extend({},v),S=d(x.my,s.outerWidth(),s.outerHeight());"right"===t.my[0]?N.left-=a:"center"===t.my[0]&&(N.left-=a/2),"bottom"===t.my[1]?N.top-=c:"center"===t.my[1]&&(N.top-=c/2),N.left+=S[0],N.top+=S[1],o={marginLeft:p,marginTop:m},e.each(["left","top"],(function(i,n){e.ui.position[w[i]]&&e.ui.position[w[i]][n](N,{targetWidth:h,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:C,collisionHeight:k,offset:[l[0]+S[0],l[1]+S[1]],my:t.my,at:t.at,within:b,elem:s})})),t.using&&(r=function(e){var o=g.left-N.left,r=o+h-a,l=g.top-N.top,d=l+f-c,u={target:{element:y,left:g.left,top:g.top,width:h,height:f},element:{element:s,left:N.left,top:N.top,width:a,height:c},horizontal:r<0?"left":o>0?"right":"center",vertical:d<0?"top":l>0?"bottom":"middle"};h<a&&n(o+r)<h&&(u.horizontal="center"),f<c&&n(l+d)<f&&(u.vertical="middle"),i(n(o),n(r))>i(n(l),n(d))?u.important="horizontal":u.important="vertical",t.using.call(this,e,u)}),s.offset(e.extend(N,{using:r}))}))},e.ui.position={fit:{left:function(e,t){var n,o=t.within,r=o.isWindow?o.scrollLeft:o.offset.left,s=o.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,c=a+t.collisionWidth-s-r;t.collisionWidth>s?l>0&&c<=0?(n=e.left+l+t.collisionWidth-s-r,e.left+=l-n):e.left=c>0&&l<=0?r:l>c?r+s-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=i(e.left-a,e.left)},top:function(e,t){var n,o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,c=a+t.collisionHeight-s-r;t.collisionHeight>s?l>0&&c<=0?(n=e.top+l+t.collisionHeight-s-r,e.top+=l-n):e.top=c>0&&l<=0?r:l>c?r+s-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=i(e.top-a,e.top)}},flip:{left:function(e,t){var i,o,r=t.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];d<0?((i=e.left+h+p+f+t.collisionWidth-a-s)<0||i<n(d))&&(e.left+=h+p+f):u>0&&((o=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||n(o)<u)&&(e.left+=h+p+f)},top:function(e,t){var i,o,r=t.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];d<0?((o=e.top+h+p+f+t.collisionHeight-a-s)<0||o<n(d))&&(e.top+=h+p+f):u>0&&((i=e.top-t.collisionPosition.marginTop+h+p+f-l)>0||n(i)<u)&&(e.top+=h+p+f)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();e.ui.position;
/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */e.expr.pseudos||(e.expr.pseudos=e.expr[":"]);e.uniqueSort||(e.uniqueSort=e.unique);if(!e.escapeSelector){var r=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,s=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.escapeSelector=function(e){return(e+"").replace(r,s)}}e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter((function(e){return e%2==0}))},odd:function(){return this.filter((function(e){return e%2==1}))}});
/*!
 * jQuery UI Keycode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter((function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},e.fn.extend({uniqueId:(a=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}});
/*!
 * jQuery UI Scroll Parent 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var a})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;
/*!
 * jquery.fancytree.dnd.js
 *
 * Drag-and-drop support (jQuery UI draggable/droppable).
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2023, Martin Wendt (https://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.38.3
 * @date 2023-02-01T20:52:50Z
 */o=[i(0),i(30),i(62),i(29)],void 0===(r="function"==typeof(n=function(e){"use strict";var t=!1;function i(e){return 0===e?"":e>0?"+"+e:""+e}function n(i){var n=i.options.dnd||null,o=i.options.glyph||null;n&&(t||(e.ui.plugin.add("draggable","connectToFancytree",{start:function(t,i){var n=e(this).data("ui-draggable")||e(this).data("draggable"),o=i.helper.data("ftSourceNode")||null;if(o)return n.offset.click.top=-2,n.offset.click.left=16,o.tree.ext.dnd._onDragEvent("start",o,null,t,i,n)},drag:function(t,i){var n,o=e(this).data("ui-draggable")||e(this).data("draggable"),r=i.helper.data("ftSourceNode")||null,s=i.helper.data("ftTargetNode")||null,a=e.ui.fancytree.getNode(t.target),l=r&&r.tree.options.dnd;t.target&&!a&&e(t.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length>0?(r||s||e.ui.fancytree).debug("Drag event over helper: ignored."):(i.helper.data("ftTargetNode",a),l&&l.updateHelper&&(n=r.tree._makeHookContext(r,t,{otherNode:a,ui:i,draggable:o,dropMarker:e("#fancytree-drop-marker")}),l.updateHelper.call(r.tree,r,n)),s&&s!==a&&s.tree.ext.dnd._onDragEvent("leave",s,r,t,i,o),a&&a.tree.options.dnd.dragDrop&&(a===s||a.tree.ext.dnd._onDragEvent("enter",a,r,t,i,o),a.tree.ext.dnd._onDragEvent("over",a,r,t,i,o)))},stop:function(t,i){var n=e(this).data("ui-draggable")||e(this).data("draggable"),o=i.helper.data("ftSourceNode")||null,r=i.helper.data("ftTargetNode")||null,s="mouseup"===t.type&&1===t.which;s||(o||r||e.ui.fancytree).debug("Drag was cancelled"),r&&(s&&r.tree.ext.dnd._onDragEvent("drop",r,o,t,i,n),r.tree.ext.dnd._onDragEvent("leave",r,o,t,i,n)),o&&o.tree.ext.dnd._onDragEvent("stop",o,null,t,i,n)}}),t=!0)),n&&n.dragStart&&i.widget.element.draggable(e.extend({addClasses:!1,appendTo:i.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(t){var i,n,r,s=e.ui.fancytree.getNode(t.target);return s?(r=s.tree.options.dnd,n=e(s.span),(i=e("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(n.find("span.fancytree-title").clone())).data("ftSourceNode",s),o&&i.find(".fancytree-drag-helper-img").addClass(o.map._addClass+" "+o.map.dragHelper),r.initHelper&&r.initHelper.call(s.tree,s,{node:s,tree:s.tree,originalEvent:t,ui:{helper:i}}),i):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(e,t){return!!t.helper.data("ftSourceNode")}},i.options.dnd.draggable)),n&&n.dragDrop&&i.widget.element.droppable(e.extend({addClasses:!1,tolerance:"intersect",greedy:!1},i.options.dnd.droppable))}return e.ui.fancytree.registerExtension({name:"dnd",version:"2.38.3",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dropMarkerOffsetX:-24,dropMarkerInsertOffsetX:-16,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(t){var i=t.tree;this._superApply(arguments),i.options.dnd.dragStart&&i.$container.on("mousedown",(function(i){if(t.options.dnd.focusOnClick){var n=e.ui.fancytree.getNode(i);n&&n.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout((function(){e(i.target).closest(":tabbable").focus()}),10)}})),n(i)},_setDndStatus:function(t,n,o,r,s){var a,l,c="center",d=this._local,u=this.options.dnd,h=this.options.glyph,p=t?e(t.span):null,f=e(n.span),g=f.find("span.fancytree-title");if(d.$dropMarker||(d.$dropMarker=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(e(this.$div).parent()),h&&d.$dropMarker.addClass(h.map._addClass+" "+h.map.dropMarker)),"after"===r||"before"===r||"over"===r){switch(a=u.dropMarkerOffsetX||0,r){case"before":c="top",a+=u.dropMarkerInsertOffsetX||0;break;case"after":c="bottom",a+=u.dropMarkerInsertOffsetX||0}l={my:"left"+i(a)+" center",at:"left "+c,of:g},this.options.rtl&&(l.my="right"+i(-a)+" center",l.at="right "+c),d.$dropMarker.toggleClass("fancytree-drop-after","after"===r).toggleClass("fancytree-drop-over","over"===r).toggleClass("fancytree-drop-before","before"===r).toggleClass("fancytree-rtl",!!this.options.rtl).show().position(e.ui.fancytree.fixPositionOptions(l))}else d.$dropMarker.hide();p&&p.toggleClass("fancytree-drop-accept",!0===s).toggleClass("fancytree-drop-reject",!1===s),f.toggleClass("fancytree-drop-target","after"===r||"before"===r||"over"===r).toggleClass("fancytree-drop-after","after"===r).toggleClass("fancytree-drop-before","before"===r).toggleClass("fancytree-drop-accept",!0===s).toggleClass("fancytree-drop-reject",!1===s),o.toggleClass("fancytree-drop-accept",!0===s).toggleClass("fancytree-drop-reject",!1===s)},_onDragEvent:function(t,i,n,o,r,s){var a,l,c,d,u,h,p,f,g,v=this.options.dnd,m=this._makeHookContext(i,o,{otherNode:n,ui:r,draggable:s}),y=null,b=this,_=e(i.span);switch(v.smartRevert&&(s.options.revert="invalid"),t){case"start":i.isStatusNode()?y=!1:v.dragStart&&(y=v.dragStart(i,m)),!1===y?(this.debug("tree.dragStart() cancelled"),r.helper.trigger("mouseup").hide()):(v.smartRevert&&(d=i[m.tree.nodeContainerAttrName].getBoundingClientRect(),c=e(s.options.appendTo)[0].getBoundingClientRect(),s.originalPosition.left=Math.max(0,d.left-c.left),s.originalPosition.top=Math.max(0,d.top-c.top)),_.addClass("fancytree-drag-source"),e(document).on("keydown.fancytree-dnd,mousedown.fancytree-dnd",(function(t){("keydown"===t.type&&t.which===e.ui.keyCode.ESCAPE||"mousedown"===t.type)&&b.ext.dnd._cancelDrag()})));break;case"enter":y=!!(g=(!v.preventRecursiveMoves||!i.isDescendantOf(n))&&(v.dragEnter?v.dragEnter(i,m):null))&&(Array.isArray(g)?{over:e.inArray("over",g)>=0,before:e.inArray("before",g)>=0,after:e.inArray("after",g)>=0}:{over:!0===g||"over"===g,before:!0===g||"before"===g,after:!0===g||"after"===g}),r.helper.data("enterResponse",y);break;case"over":f=null,!1===(p=r.helper.data("enterResponse"))||("string"==typeof p?f=p:(l=_.offset(),h={x:(u={x:o.pageX-l.left,y:o.pageY-l.top}).x/_.width(),y:u.y/_.height()},p.after&&h.y>.75||!p.over&&p.after&&h.y>.5?f="after":p.before&&h.y<=.25||!p.over&&p.before&&h.y<=.5?f="before":p.over&&(f="over"),v.preventVoidMoves&&(i===n?(this.debug("    drop over source node prevented"),f=null):"before"===f&&n&&i===n.getNextSibling()?(this.debug("    drop after source node prevented"),f=null):"after"===f&&n&&i===n.getPrevSibling()?(this.debug("    drop before source node prevented"),f=null):"over"===f&&n&&n.parent===i&&n.isLastSibling()&&(this.debug("    drop last child over own parent prevented"),f=null)),r.helper.data("hitMode",f))),"before"===f||"after"===f||!v.autoExpandMS||!1===i.hasChildren()||i.expanded||v.dragExpand&&!1===v.dragExpand(i,m)||i.scheduleAction("expand",v.autoExpandMS),f&&v.dragOver&&(m.hitMode=f,y=v.dragOver(i,m)),a=!1!==y&&null!==f,v.smartRevert&&(s.options.revert=!a),this._local._setDndStatus(n,i,r.helper,f,a);break;case"drop":(f=r.helper.data("hitMode"))&&v.dragDrop&&(m.hitMode=f,v.dragDrop(i,m));break;case"leave":i.scheduleAction("cancel"),r.helper.data("enterResponse",null),r.helper.data("hitMode",null),this._local._setDndStatus(n,i,r.helper,"out",void 0),v.dragLeave&&v.dragLeave(i,m);break;case"stop":_.removeClass("fancytree-drag-source"),e(document).off(".fancytree-dnd"),v.dragStop&&v.dragStop(i,m);break;default:e.error("Unsupported drag event: "+t)}return y},_cancelDrag:function(){var t=e.ui.ddmanager.current;t&&t.cancel()}}),e.ui.fancytree})?n.apply(t,o):n)||(e.exports=r)},function(e,t,i){var n,o,r;!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;
/*!
 * jQuery UI :data 1.13.3
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){return e.extend(e.expr.pseudos,{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])}})})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){return e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}}})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;
/*!
 * jQuery UI Scroll Parent 1.13.3
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */!function(s){"use strict";o=[i(0),i(2)],void 0===(r="function"==typeof(n=function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter((function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)}})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){var n,o,r;
/*!
 * jQuery UI Droppable 1.13.3
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */!function(s){"use strict";o=[i(0),i(30),i(31),i(2),i(17)],void 0===(r="function"==typeof(n=function(e){e.widget("ui.droppable",{version:"1.13.3",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof i?i:function(e){return e.is(i)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept="function"==typeof i?i:function(e){return e.is(i)};else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,o=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t))return o=!0,!1})),!o&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,o){if(!i.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,a=r+t.helperProportions.width,l=s+t.helperProportions.height,c=i.offset.left,d=i.offset.top,u=c+i.proportions().width,h=d+i.proportions().height;switch(n){case"fit":return c<=r&&a<=u&&d<=s&&l<=h;case"intersect":return c<r+t.helperProportions.width/2&&a-t.helperProportions.width/2<u&&d<s+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,d,i.proportions().height)&&e(o.pageX,c,i.proportions().width);case"touch":return(s>=d&&s<=h||l>=d&&l<=h||s<d&&l>h)&&(r>=c&&r<=u||a>=c&&a<=u||r<c&&a>u);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===r[n].element[0]){r[n].proportions().height=0;continue e}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),n},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}))},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,r,s=e.ui.intersect(t,this,this.options.tolerance,i),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===o}))).length&&((n=e(r[0]).droppable("instance")).greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}}))},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});return e.ui.droppable})?n.apply(t,o):n)||(e.exports=r)}()},function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),r=i(32),s=i.n(r);o.a.fn.cmfContextMenu=function(e){e=o.a.extend({delegate:null,actions:[],select:function(e,t){},wrapperTemplate:'<ul id="cmf-context-menu"></ul>',actionTemplate:'<li><i class="{{ iconClass }}"></i> {{ label }}</li>'},e);var t,i=o()("body");o()(this).on("contextmenu",e.delegate,(function(n){n.preventDefault();var r=o()(this);t&&t.remove();var s=e.actions;if("function"==typeof s&&(s=s(r)),!1!==s&&!o.a.isEmptyObject(s)){(t=function(){var t=o()(e.wrapperTemplate),i=t.is("ul")?t:t.find("ul");for(var n in s){var r=s[n],a=o()(function(){var t=e.actionTemplate;for(var i in r)r.hasOwnProperty(i)&&(t=t.replace("{{ "+i+" }}",r[i]));return t}());a.data("cmd",n),i.append(a)}return t}()).css({top:n.pageY,left:n.pageX}),i.append(t);var a=e.select;t.on("click","li",(function(e){e.stopPropagation(),a(r,e)}))}})),o()("html").on("click",(function(e){t&&t.remove()}))};i(29),i(55),i(64),i(74);var a=new s.a;class l{constructor(e){if(!window.jQuery||!jQuery.fn.fancytree)throw"The FancytreeAdapter requires both jQuery and the FancyTree library.";if(!e.request)throw"The FancytreeAdapter requires a request option.";this.requestData=e.request,this.rootNode=e.root_node||"/",this.useCache=void 0===e.use_cache||e.use_cache,this.boundToInput=!1,this.sortableBy=null!=e.sortableBy&&e.sortableBy,e.dnd&&null==e.dnd.enabled&&(e.dnd.enabled=!0);var t=()=>!0;if(this.dndOptions=jQuery.extend({enabled:!1,isNodeDraggable:t,nodeAcceptsDraggable:t},e.dnd),this.dndOptions.enabled&&!e.request.move)throw"The move request needs to be configured when drag 'n drop is enabled, pass it using the `request.move` option.";this.dndOptions.request=e.request.move,this.actions=new Array,this.tree=null,this.$tree=null,this.pathKeyMap={}}bindToElement(e){if(this.$tree)throw"Cannot bind to multiple elements.";if(!e instanceof jQuery)throw"FancytreeAdapter can only be adapted to a jQuery object.";this.$tree=e;var t=this.actions,i=function(e,t){return"object"==typeof e&&e.hasOwnProperty("data")?function(e,t){var i="?"===e.substr(0,1),n=i?e.substr(1):e;if(void 0===t[n]){if(i)return;throw'Attribute "'+props[prop]+'" does not exists'}return t[n]}(e.data,t.descriptors):"function"==typeof e?e(requestNode):"string"==typeof e?e:void 0},n=e=>{if(0!==e.length){if("//"==e.path||"/"==e.path)return n(e.children[Object.keys(e.children)[0]]);var o=e.path.replace("/","/").replace("//","/"),r=this.pathKeyMap[o]||""+jQuery.ui.fancytree._nextNodeKey++,s={title:e.label,key:r,children:[],actions:{},refPath:o,type:e.payload_type,unselectable:!0};this.pathKeyMap[o]=r,e.descriptors.hasOwnProperty("icon")&&(s.icon=e.descriptors.icon),e.descriptors.hasOwnProperty("position")&&(s.position=e.descriptors.position);for(let n in t){var a=t[n],l=i(a.url,e);void 0!==l&&(s.actions[n]={label:n,iconClass:a.icon,url:l})}var c=0;for(name in e.children)if(e.children.hasOwnProperty(name)){var d=n(e.children[name]);d&&s.children.push(d),c++}return 0!=c&&(s.folder=!0,s.lazy=!0,0===s.children.length&&(s.children=null)),s}},o=this.requestData,r=this.useCache,s={source:r&&a.has(this.rootNode)?a.get(this.rootNode):o.load(this.rootNode),lazyLoad:function(e,t){var i=t.node.data.refPath;if(r&&a.has(i))t.result=a.get(i);else{var n=o.load(i);Array.isArray(n)?t.result=n:t.result=jQuery.extend({data:{}},n)}},postProcess:function(e,t){if(t.hasOwnProperty("error")&&null!=t.error)return void(t.result={error:"An error occured while retrieving the nodes: "+t.error});let i=n(t.response);var o;o=i,i=t.node.data.refPath==o.refPath?i.children:[i],1==i.length&&void 0!==i[0].folder&&(i[0].expanded=!0),t.result=i,r&&a.set(t.node.data.refPath,i)},activeVisible:!0};this.sortableBy&&(s.sortChildren=(e,t)=>{var i=e.data[this.sortableBy],n=t.data[this.sortableBy];return i==n?0:i<n?-1:1}),this.dndOptions.enabled&&(s.extensions=["dnd"],s.dnd={dragStart:(e,t)=>this.dndOptions.isNodeDraggable(e,t),dragEnter:(e,t)=>this.dndOptions.nodeAcceptsDraggable(e,t),dragExpand:(e,t)=>!0,dragDrop:(e,t)=>{let i=t.otherNode,o=t.node,r=i.data.refPath,a=o.data.refPath,l="over"!=t.hitMode&&"child"!=t.hitMode,c=l?o.parent:o,d=c.data.refPath,u=d+"/"+r.substr(1+r.lastIndexOf("/")),h=i.icon,p=e=>{i.remove(),l&&c.children.forEach(t=>{t.data.position>=e.descriptors.position&&t.data.position++}),c.addChildren(n(e))},f=(e,t)=>{e.icon=t,i.renderTitle()};f(i,"fa fa-spinner fa-spin");let g=e=>{let t="Failed to move node",n=i.title;e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("message")&&(t+=": "+e.responseJSON.message);let o=null;e.hasOwnProperty("responseJSON")&&(o=e.responseJSON),i._error={message:t,details:o},i.renderStatus(),i.title+="["+t+"]",i.renderTitle(),console.error(t),f(i,h),setTimeout((function(){i._error=null,i.title=n,i.renderTitle(),i.renderStatus()}),1e3)};this.requestData.move(r,u).done(e=>{l&&this.dndOptions.reorder?this.requestData.reorder(d,a,u,t.hitMode).done(e=>{p(e),s.hasOwnProperty("sortChildren")&&c.sortChildren(s.sortChildren,!0),f(i,h)}).fail(e=>{g(e),setTimeout(()=>{this.requestData.move(u,r).done(e=>{s.hasOwnProperty("sortChildren")&&c.sortChildren(s.sortChildren,!0),f(i,h)})},1e3)}):(i.icon=h,p(e))}).fail(g)}}),this.$tree.fancytree(s),this.actions&&this.$tree.cmfContextMenu({delegate:"span.fancytree-title",wrapperTemplate:'<ul class="dropdown-menu" style="display:block;"></ul>',actionTemplate:'<li role="presentation"><a role="menuitem" href="{{ url }}"><i class="{{ iconClass }}"></i> {{ label }}</li>',actions:function(e){return jQuery.ui.fancytree.getNode(e).data.actions}}),this.tree=$.ui.fancytree.getTree(this.$tree),this.tree.getNodeByRefPath=function(e){return this.findFirst(t=>t.data.refPath==e)},this.$tree.fancytree("option","activate",(e,t)=>{this.boundToInput||(t.node.setActive(!1),t.node.setFocus(!1))})}bindToInput(e){this.boundToInput=!0,this.$tree.fancytree("option","activate",(t,i)=>{e.val(i.node.data.refPath)});var t=e=>{if(!this.pathKeyMap.hasOwnProperty(e)){for(var t=e.split("/");!this.pathKeyMap.hasOwnProperty(t.join("/"))&&t.pop(););if(0===t.length)return;var n=t.join("/");e.substr(n.length+1).split("/").forEach(e=>{this.pathKeyMap[n+="/"+e]=""+jQuery.ui.fancytree._nextNodeKey++})}this.tree.loadKeyPath(i(e),(function(e,t){"ok"==t&&(e.setExpanded(),e.setActive())}))},i=e=>{var t="",i="";return e.split("/").forEach(e=>{""!=e&&this.pathKeyMap.hasOwnProperty(i+="/"+e)&&(t+="/"+this.pathKeyMap[i])}),t};this.$tree.bind("fancytreeinit",(function(i,n){t(e.val())})),e.on("change",(function(e){t($(this).val())}))}addAction(e,t,i){this.actions[e]={url:t,icon:i}}static _resetCache(){a.clear()}}o.a.fn.cmfTree=function(e){e=o.a.extend({adapter:null,request:{load:null},actions:{}},e);var t=o()(this);if(!e.request.load)throw"cmfTree needs an AJAX URL to lazy load the tree, pass it using the `request.load` option.";e.adapter||(e.adapter=new l(e));var i=e.adapter;if(!i.bindToElement)throw"cmfTree adapters must have a bindToElement() method to specify the output element of the tree.";for(let t in e.actions)if(e.actions.hasOwnProperty(t)){if(!i.addAction)throw"The configured cmfTree adapter does not support actions, implement the addAction() method or use another adapter.";var n=e.actions[t];if(!n.url)throw'actions should have a url defined, "'+t+'" does not.';i.addAction(t,n.url,n.icon)}if(i.bindToElement(t),e.path_output){if(!i.bindToInput)throw"The configured cmfTree adapter does not support binding to an input field, implement the bindToInput() method or use another adapter.";i.bindToInput(function(e){if("string"==typeof e)return o()(e);if(e instanceof o.a)return e;throw"Cannot handle selector "+e+". You may want to pass a jQuery object or a jQuery selector."}(e.path_output))}return i}},function(e,t){},,,,,,,,,,function(e,t){}]);